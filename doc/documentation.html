<!DOCTYPE html>
<html>
<head>
<title>documentation.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="table-of-contents">Table of Contents</h1>
<ul>
<li><a href="#basics-on-co-simulation">Basics on Co-Simulation</a>
<ul>
<li><a href="#basics-on-co-simulation-with-veos">Basics on Co-Simulation with VEOS</a></li>
<li><a href="#basics-on-cosim-servers">Basics on CoSim Servers</a></li>
<li><a href="#basics-on-cosim-clients">Basics on CoSim Clients</a></li>
</ul>
</li>
<li><a href="#working-with-the-veos-cosim-demo">Working with the VEOS CoSim Demo</a>
<ul>
<li><a href="#overview-of-the-veos-cosim-demo">Overview of the VEOS CoSim Demo</a></li>
<li><a href="#how-to-prepare-the-cosim-demo">How to Prepare the CoSim Demo</a></li>
<li><a href="#example-setting-up-a-basic-co-simulation">Example: Setting Up a Basic Co-Simulation</a></li>
<li><a href="#example-implementing-simulation-state-change-callbacks">Example: Implementing Simulation State Change Callbacks</a></li>
<li><a href="#example-accessing-the-data-interface">Example: Accessing the Data Interface</a></li>
<li><a href="#example-using-data-callback-functions-to-get-information-on-can-bus-messages">Example: Using Data Callback Functions to Get Information on CAN Bus Messages</a></li>
<li><a href="#example-sending-data">Example: Sending Data</a></li>
<li><a href="#example-receiving-data">Example: Receiving Data</a></li>
<li><a href="#example-running-a-polling-based-simulation">Example: Running a Polling-Based Simulation</a></li>
<li><a href="#example-handling-io-signals">Example: Handling I/O Signals</a></li>
<li><a href="#example-optional-client">Example: Optional Client</a></li>
</ul>
</li>
<li><a href="#dsveoscosim-client-api-reference">DsVeosCoSim Client API Reference</a>
<ul>
<li><a href="#enumerations">Enumerations</a>
<ul>
<li><a href="#dsveoscosim_canmessageflags-enumeration">DsVeosCoSim_CanMessageFlags</a></li>
<li><a href="#dsveoscosim_command-enumeration">DsVeosCoSim_Command</a></li>
<li><a href="#dsveoscosim_connectionstate-enumeration">DsVeosCoSim_ConnectionState</a></li>
<li><a href="#dsveoscosim_datatype-enumeration">DsVeosCoSim_DataType</a></li>
<li><a href="#dsveoscosim_ethmessageflags-enumeration">DsVeosCoSim_EthMessageFlags</a></li>
<li><a href="#dsveoscosim_lincontrollertype-enumeration">DsVeosCoSim_LinControllerType</a></li>
<li><a href="#dsveoscosim_linmessageflags-enumeration">DsVeosCoSim_LinMessageFlags</a></li>
<li><a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result</a></li>
<li><a href="#dsveoscosim_severity-enumeration">DsVeosCoSim_Severity</a></li>
<li><a href="#dsveoscosim_sizekind-enumeration">DsVeosCoSim_SizeKind</a></li>
<li><a href="#dsveoscosim_terminatereason-enumeration">DsVeosCoSim_TerminateReason</a></li>
</ul>
</li>
<li><a href="#functions">Functions</a>
<ul>
<li><a href="#dsveoscosim_canmessagereceivedcallback-function-pointer">DsVeosCoSim_CanMessageReceivedCallback</a></li>
<li><a href="#dsveoscosim_connect-function">DsVeosCoSim_Connect</a></li>
<li><a href="#dsveoscosim_destroy-function">DsVeosCoSim_Destroy</a></li>
<li><a href="#dsveoscosim_disconnect-function">DsVeosCoSim_Disconnect</a></li>
<li><a href="#dsveoscosim_ethmessagereceivedcallback-function-pointer">DsVeosCoSim_EthMessageReceivedCallback</a></li>
<li><a href="#dsveoscosim_finishcommand-function">DsVeosCoSim_FinishCommand</a></li>
<li><a href="#dsveoscosim_getcancontrollers-function">DsVeosCoSim_GetCanControllers</a></li>
<li><a href="#dsveoscosim_getconnectionstate-function">DsVeosCoSim_GetConnectionState</a></li>
<li><a href="#dsveoscosim_getethcontrollers-function">DsVeosCoSim_GetEthControllers</a></li>
<li><a href="#dsveoscosim_getincomingsignals-function">DsVeosCoSim_GetIncomingSignals</a></li>
<li><a href="#dsveoscosim_getlincontrollers-function">DsVeosCoSim_GetLinControllers</a></li>
<li><a href="#dsveoscosim_getoutgoingsignals-function">DsVeosCoSim_GetOutgoingSignals</a></li>
<li><a href="#dsveoscosim_incomingsignalchangedcallback-function-pointer">DsVeosCoSim_IncomingSignalChangedCallback</a></li>
<li><a href="#dsveoscosim_linmessagereceivedcallback-function-pointer">DsVeosCoSim_LinMessageReceivedCallback</a></li>
<li><a href="#dsveoscosim_logcallback-function-pointer">DsVeosCoSim_LogCallback</a></li>
<li><a href="#dsveoscosim_pollcommand-function">DsVeosCoSim_PollCommand</a></li>
<li><a href="#dsveoscosim_readincomingsignal-function">DsVeosCoSim_ReadIncomingSignal</a></li>
<li><a href="#dsveoscosim_receivecanmessage-function">DsVeosCoSim_ReceiveCanMessage</a></li>
<li><a href="#dsveoscosim_receiveethmessage-function">DsVeosCoSim_ReceiveEthMessage</a></li>
<li><a href="#dsveoscosim_receivelinmessage-function">DsVeosCoSim_ReceiveLinMessage</a></li>
<li><a href="#dsveoscosim_runcallbackbasedcosimulation-function">DsVeosCoSim_RunCallbackBasedCoSimulation</a></li>
<li><a href="#dsveoscosim_setcallbacks-function">DsVeosCoSim_SetCallbacks</a></li>
<li><a href="#dsveoscosim_setlogcallback-function">DsVeosCoSim_SetLogCallback</a></li>
<li><a href="#dsveoscosim_setnextsimulationtime-function">DsVeosCoSim_SetNextSimulationTime</a></li>
<li><a href="#dsveoscosim_simulationcallback-function-pointer">DsVeosCoSim_SimulationCallback</a></li>
<li><a href="#dsveoscosim_simulationterminatedcallback-function-pointer">DsVeosCoSim_SimulationTerminatedCallback</a></li>
<li><a href="#dsveoscosim_startpollingbasedcosimulation-function">DsVeosCoSim_StartPollingBasedCoSimulation</a></li>
<li><a href="#dsveoscosim_transmitcanmessage-function">DsVeosCoSim_TransmitCanMessage</a></li>
<li><a href="#dsveoscosim_transmitethmessage-function">DsVeosCoSim_TransmitEthMessage</a></li>
<li><a href="#dsveoscosim_transmitlinmessage-function">DsVeosCoSim_TransmitLinMessage</a></li>
<li><a href="#dsveoscosim_writeoutgoingsignal-function">DsVeosCoSim_WriteOutgoingSignal</a></li>
</ul>
</li>
<li><a href="#structures">Structures</a>
<ul>
<li><a href="#dsveoscosim_callbacks-structure">DsVeosCoSim_Callbacks</a></li>
<li><a href="#dsveoscosim_cancontroller-structure">DsVeosCoSim_CanController</a></li>
<li><a href="#dsveoscosim_canmessage-structure">DsVeosCoSim_CanMessage</a></li>
<li><a href="#dsveoscosim_connectconfig-structure">DsVeosCoSim_ConnectConfig</a></li>
<li><a href="#dsveoscosim_ethcontroller-structure">DsVeosCoSim_EthController</a></li>
<li><a href="#dsveoscosim_ethmessage-structure">DsVeosCoSim_EthMessage</a></li>
<li><a href="#dsveoscosim_iosignal-structure">DsVeosCoSim_IoSignal</a></li>
<li><a href="#dsveoscosim_lincontroller-structure">DsVeosCoSim_LinController</a></li>
<li><a href="#dsveoscosim_linmessage-structure">DsVeosCoSim_LinMessage</a></li>
</ul>
</li>
<li><a href="#simple-types">Simple Types</a>
<ul>
<li><a href="#dsveoscosim_buscontrollerid-type">DsVeosCoSim_BusControllerId</a></li>
<li><a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle</a></li>
<li><a href="#dsveoscosim_iosignalid-type">DsVeosCoSim_IoSignalId</a></li>
<li><a href="#dsveoscosim_simulationtime-type">DsVeosCoSim_SimulationTime</a></li>
</ul>
</li>
<li><a href="#macros">Macros</a></li>
</ul>
</li>
</ul>
<h1 id="basics-on-co-simulation">Basics on Co-Simulation</h1>
<h2 id="basics-on-co-simulation-with-veos">Basics on Co-Simulation with VEOS</h2>
<h3 id="introduction">Introduction</h3>
<p>dSPACE provides the VEOS co-simulation interface for implementing co-simulations with VEOS. This lets you couple VEOS with domain-specific simulators,
such as data replay tools and sensor signal simulators.</p>
<p>The co-simulation interface enables the exchange of simulated CAN, LIN, and Ethernet bus messages as well as I/O signals.</p>
<h3 id="co-simulation-architecture">Co-simulation architecture</h3>
<p>Co-simulation with VEOS is implemented in a client-server architecture, where the VEOS Simulator provides the overall simulation time for all co-simulation participants.</p>
<p>Each participant uses a co-simulation (CoSim) client to connect via TCP to a CoSim server that runs in the VEOS Simulator. Refer to the following illustration.</p>
<pre><code class="language-mermaid"><div class="mermaid">flowchart TB
    subgraph VeosSimulator[VEOS Simulator]
    subgraph OSA
    CoSimServer1[CoSim Server]:::blue
    CoSimServer2[CoSim Server]:::blue
    CoSimServer3[CoSim Server]:::blue
    end
    end
    subgraph Participant1[Participant]
    CoSimClient1[CoSim Client]:::blue
    end
    subgraph Participant2[Participant]
    CoSimClient2[CoSim Client]:::blue
    end
    subgraph Participant3[Participant]
    CoSimClient3[CoSim Client]:::blue
    end
    CoSimServer1 <--TCP--> Participant1
    CoSimServer2 <--TCP--> Participant2
    CoSimServer3 <--TCP--> Participant3
    classDef blue fill:#CCECFC,stroke:#88D9F8;
    classDef white fill:#ffffff,stroke:#000000;
    class VeosSimulator white
    class OSA white
    class Participant1 white
    class Participant2 white
    class Participant3 white
</div></code></pre>
<p><strong>CoSim server</strong>
A CoSim server provides the co-simulation interface for the VEOS Simulator.</p>
<p>Each CoSim server is generated from a JSON interface description file.</p>
<p>For more information, refer to <a href="#basics-on-cosim-servers">Basics on CoSim Servers</a>.</p>
<p><strong>CoSim client</strong>
Each co-simulation participant uses a CoSim client to connect to one or more CoSim servers. The CoSim client is set up via C++ source code and CMake.
Alternatively, it can be set up as a dynamic library if you want to work with the co-simulation interface via Python, for example.</p>
<p>For more information, refer to <a href="#basics-on-cosim-clients">Basics on CoSim Clients</a>.</p>
<h3 id="compatibility-and-licensing">Compatibility and licensing</h3>
<p>The VEOS co-simulation interface is compatible with VEOS 2023-B and later.</p>
<p>It requires the license for the VEOS - AAP (AUTOSAR Adaptive Platform) module.</p>
<p>The VEOS co-simulation client interface is licensed as Open Source under the permissive Apache 2.0 license.</p>
<h3 id="limitation">Limitation</h3>
<p>You cannot access variables of a co-simulation with experiment software such as ControlDesk.</p>
<h2 id="basics-on-cosim-servers">Basics on CoSim Servers</h2>
<h3 id="introduction">Introduction</h3>
<p>A CoSim server provides the co-simulation interface of the VEOS Simulator that controls the simulation.</p>
<p>It is imported as a JSON interface description file into an offline simulation application in VEOS.</p>
<p>Refer to the following illustration.</p>
<pre><code class="language-mermaid"><div class="mermaid">flowchart LR
    CoSimJson[CoSim JSON]:::blue
    VeosImport[VEOS import]:::white
    subgraph OSA
    CoSimServer[CoSim Server]:::blue
    end
    CoSimJson --> VeosImport
    VeosImport --> CoSimServer
    classDef blue fill:#CCECFC,stroke:#88D9F8;
    classDef white fill:#ffffff,stroke:#000000;
    class OSA white
</div></code></pre>
<h3 id="configuring-a-cosim-server">Configuring a CoSim server</h3>
<p>To configure a CoSim server for a specific co-simulation client, you have to describe the co-simulation interface in a client-specific JSON description file.</p>
<p>The JSON file can provide the following information:</p>
<ul>
<li>
<p>General information, such as the time step interval for the co-simulation</p>
</li>
<li>
<p>Bus controller information, such as the baud rate</p>
</li>
<li>
<p>I/O signal information, such as data types of signals</p>
</li>
</ul>
<p>The JSON schema for the CoSim interface is based on the <code>simulator-extension.base.schema.json</code> schema. You can find both schemas under <code>tools/schemas</code> in the installation directory of your VEOS installation.</p>
<p><strong>Specifying the TCP port</strong>
By default, the CoSim server provides a dynamic TCP port and a port mapper. The port mapper is automatically started by the first CoSim server in an OSA. For this use case, you do not have to explicitly specify a TCP port in the JSON interface description file.</p>
<p>However, for some use cases, you might want to specify a static TCP port. To do this, use the TcpPort property, i.e.,:</p>
<pre class="hljs"><code><div><span class="hljs-string">"TcpPort"</span>: {
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"number"</span>,
    <span class="hljs-attr">"default"</span>: <span class="hljs-number">12345</span>,
    <span class="hljs-attr">"minimum"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">"maximum"</span>: <span class="hljs-number">65535</span>
}
</div></code></pre>
<blockquote>
<p><strong>Note</strong></p>
<p>When you specify a static TCP port, you have to provide this to the related client. Refer to <a href="#connecting-to-a-cosim-server">Connecting to a CoSim server</a>.</p>
</blockquote>
<p>Each VeosCoSim server starts its own TCP server at the TCP port specified in the JSON file and registers this port with the port mapper.</p>
<p>The default TCP port of the port mapper is 27027. You can reconfigure it using the <code>VEOS_COSIM_PORTMAPPER_PORT</code> environment variable. You have to do this for the CoSim servers and the CoSim clients.</p>
<p>For CoSim servers, you have to set the environment variable before starting the VEOS Kernel.</p>
<h3 id="importing-a-cosim-json-file">Importing a CoSim JSON file</h3>
<p>You can import a CoSim JSON into any OSA using the VEOS Player (only on Windows) or the VEOS Model Console (on Windows and Linux).</p>
<p>The following listing shows an example of using the VEOS Model Console on Linux to import the <code>CosimServer.json</code> description file into the newly created <code>CoSimOsa.osa</code> in the current working directory.</p>
<pre class="hljs"><code><div>/opt/dspace/veos2023b/bin/veos model import -n ./CoSimOsa.osa -p ./CoSimServer.json
</div></code></pre>
<p>For a working example, refer to <a href="#how-to-prepare-the-cosim-demo">How to Prepare the CoSim Demo</a>.</p>
<p><strong>Connecting a CoSim server to other VPUs</strong>
To connect the I/O signals and controllers of the CoSim server to other VPUs in the same OSA, you can use drag &amp; drop in the VEOS Player (only on Windows) or the VEOS Model Console (on Windows and Linux).</p>
<p>In many cases, you can also use the auto-connect functionality of VEOS. You can find an example of this in the CoSim demo. Refer to <a href="#example-using-data-callback-functions-to-get-information-on-can-bus-messages">Example: Using Data Callback Functions to Get Information on CAN Bus Messages</a>.</p>
<h2 id="basics-on-cosim-clients">Basics on CoSim Clients</h2>
<h3 id="introduction">Introduction</h3>
<p>You have to implement a CoSim client in C++ code that uses the CoSim API to interact with the CoSim server.</p>
<p>You can then integrate the client as a submodule in the project containing your binary (recommended) or precompile the CoSim sources as a static library to link it to your binary.</p>
<p>If you want to access the co-simulation interface via Python, you can also precompile the client sources as a dynamic library.</p>
<h3 id="workflow">Workflow</h3>
<p>The following steps outline the workflow for creating a CoSim client:</p>
<ol>
<li>
<p>Download the latest <code>veos-cosim-client-&lt;version&gt;.zip</code> archive from <a href="https://github.com/dspace-group/veos-cosim-client">veos-cosim-client</a> and extract it to a dedicated folder, e.g., <code>DsVeosCoSim/ThirdParty/veos-cosim-client</code> in your home directory.</p>
</li>
<li>
<p>Depending on your use case, take the following steps:</p>
<ul>
<li>
<p>For including the client as a submodule in your project, refer to Example: Setting Up a Basic Co-Simulation.</p>
</li>
<li>
<p>For precompiling as a dynamic library, execute the following commands in the folder to which you extracted the DsVeosCoSim.zip archive:</p>
<pre class="hljs"><code><div>mkdir Debug
cd Debug
cmake .. -DBUILD_SHARED_LIBS=ON
cmake --build . --config=Debug
</div></code></pre>
<p>This produces a dynamic library file in the Src/Debug subdirectory.</p>
<p>Replace Debug with Release in the listing above to create a release version.</p>
</li>
<li>
<p>For precompiling as a static library, execute the following commands in the folder to which you extracted the DsVeosCoSim.zip archive:</p>
<pre class="hljs"><code><div>mkdir Debug
cd Debug
cmake ..
cmake --build . --config Debug
cmake --install . --config Debug --prefix ../install
</div></code></pre>
<p>This produces a static library file in the install subdirectory.</p>
<p>Replace Debug with Release in the listing above to create a release version.</p>
</li>
</ul>
</li>
</ol>
<h3 id="connecting-to-a-cosim-server">Connecting to a CoSim server</h3>
<p>By default, a CoSim client asks the CoSim port mapper for the actual TCP port of the related CoSim server and then connects to this port. For this to work, you have to specify the server name via <a href="#dsveoscosim_connectconfig-structure">DsVeosCoSim_ConnectConfig.serverName</a>.</p>
<p>However, if you specified a static TCP port for the CoSim server, you have to explicitly connect to this port by providing it via <a href="#dsveoscosim_connectconfig-structure">DsVeosCoSim_ConnectConfig.remotePort</a> in the implementation of your client.</p>
<p>If you specify both <code>serverName</code> and <code>remotePort</code>, <code>remotePort</code> is used to establish the connection.</p>
<p>If the server is running on a different host, you must specify the IP address using <a href="#dsveoscosim_connectconfig-structure">DsVeosCoSim_ConnectConfig.remoteIpAddress</a>.</p>
<p>The local port is also created dynamically by default. For special cases like creating a tunnel between client and server, you can overwrite this with a specific port using <a href="#dsveoscosim_connectconfig-structure">DsVeosCoSim_ConnectConfig.localPort</a>.</p>
<blockquote>
<p><strong>Tip</strong></p>
<p>You can use <a href="#dsveoscosim_connectconfig-structure">DsVeosCoSim_ConnectConfig.clientName</a> to provide a name for the client that can be used in VEOS messages for better readability. For example, if you set <code>DsVeosCoSim_ConnectConfig.clientName = &quot;CustomClient&quot;</code>, a message might look like this: <code>dSPACE VEOS CoSim client 'CustomClient' at 127.0.0.1:56248 connected.</code>.</p>
</blockquote>
<h3 id="callback-based-vs-polling-based-co-simulation">Callback-based vs. polling-based co-simulation</h3>
<p>You can configure the CoSim client for two different co-simulation modes:</p>
<ul>
<li>
<p>Callback-based: This is a blocking simulation which only stops when the client is disconnected from the server. While it is running, the registered callbacks are processed for each simulation step.</p>
<p>During each callback, VEOS does not advance the simulation until the callback is finished.</p>
<p>In the absence of errors, a callback-based co-simulation only returns when the client is disconnected from the server.</p>
<p>For a basic example, refer to <a href="#example-setting-up-a-basic-co-simulation">Example: Setting Up a Basic Co-Simulation</a>.</p>
</li>
<li>
<p>Polling-based: The simulation polls for commands and performs the actions that are specified in the implementation for each command. This can also include callbacks, which are received in the same order as for a callback-based co-simulation.</p>
<p>This mode can be useful in cases where the CoSim server has to communicate with another API that is callback-based so you do not have to take care of synchronizing the callbacks.</p>
<p>For an example of implementing a polling-based co-simulation, refer to <a href="#example-running-a-polling-based-simulation">Example: Running a Polling-Based Simulation</a>.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>Once one of these modi is selected, it cannot be changed until the client is disconnected from the server.</p>
</blockquote>
</li>
</ul>
<h3 id="basics-on-callbacks">Basics on callbacks</h3>
<p>You can use callback functions to get information on state changes of the simulation and on data exchange:</p>
<ul>
<li>
<p>State changes: Started, stopped, paused, continued, terminated</p>
</li>
<li>
<p>Steps: begin and end step</p>
</li>
<li>
<p>Bus message received: CAN, Ethernet, LIN</p>
</li>
<li>
<p>I/O signal changed (for incoming signals)</p>
</li>
</ul>
<p>Callbacks are optional. However, not registering any callbacks makes sense only for polling-based simulations.</p>
<p>Each time the server notifies the client of a new step, the callbacks are received in the following order:</p>
<ul>
<li>
<p>Begin step</p>
</li>
<li>
<p>Bus message and I/O signal callbacks in no specific order</p>
</li>
<li>
<p>End step</p>
</li>
</ul>
<h3 id="basics-on-timing">Basics on timing</h3>
<p>Each time VEOS receives the simulation start or continue command, the server begins to send steps to the client and stops when a simulation stop, pause, or terminate command is received.</p>
<p>The first step always takes place at simulation time 0. After that, the simulation is advanced by a step after each time interval specified in the StepSize property in the CoSim server JSON file.</p>
<p>The client can intervene via the <a href="#dsveoscosim_setnextsimulationtime-function">DsVeosCoSim_SetNextSimulationTime Function</a>, which specifies the condition for the server to send the next step. This can be done for each step or just from time to time. Once the server no longer receives this condition, it proceeds with the predefined step size. If the time specified via the <a href="#dsveoscosim_setnextsimulationtime-function">DsVeosCoSim_SetNextSimulationTime Function</a> is in the past or equal to the present time, it is ignored.</p>
<p>If no step size is specified in the JSON file, the server sends only one step at simulation time 0. The simulation is only advanced if the client executes the <a href="#dsveoscosim_setnextsimulationtime-function">DsVeosCoSim_SetNextSimulationTime Function</a>. Otherwise, the simulation in VEOS continues without the co-simulator.</p>
<p>Bus messages and I/O signals are always sent between server and client in the context of a step.</p>
<h1 id="working-with-the-veos-cosim-demo">Working with the VEOS CoSim Demo</h1>
<h2 id="overview-of-the-veos-cosim-demo">Overview of the VEOS CoSim Demo</h2>
<h3 id="introduction">Introduction</h3>
<p>The VEOS CoSim demo provides instructions for setting up a simple example CoSim server and implementing several kinds of CoSim clients to illustrate the basic co-simulation functionalities.</p>
<h3 id="workflow">Workflow</h3>
<p>The VEOS CoSim demo leads you through the following steps:</p>
<ul>
<li>
<p>Create a simple JSON interface description file for a CoSim server</p>
</li>
<li>
<p>Create an OSA in VEOS, import the JSON file, and load it to the simulator</p>
</li>
<li>
<p>Implement a basic CoSim client and start a co-simulation</p>
</li>
<li>
<p>Modify the basic CoSim client to familiarize yourself with the principal aspects of co-simulation</p>
</li>
</ul>
<h3 id="overview-of-the-examples">Overview of the examples</h3>
<p>Before starting with any of the examples listed below, you must make the preparations described in <a href="#how-to-prepare-the-cosim-demo">How to Prepare the CoSim Demo</a>.</p>
<table>
<thead>
<tr>
<th>Example</th>
<th>What It Shows</th>
<th>Refer to</th>
</tr>
</thead>
<tbody>
<tr>
<td>Basic co-simulation</td>
<td>Enable basic logging</td>
<td><a href="#example-setting-up-a-basic-co-simulation">Example: Setting Up a Basic Co-Simulation</a></td>
</tr>
<tr>
<td>Implementing simulation state change callbacks</td>
<td>Tracking simulation state changes</td>
<td><a href="#example-implementing-simulation-state-change-callbacks">Example: Implementing Simulation State Change Callbacks</a></td>
</tr>
<tr>
<td>Accessing the data interface</td>
<td>Getting information on available bus controllers and I/O signals</td>
<td><a href="#example-accessing-the-data-interface">Example: Accessing the Data Interface</a></td>
</tr>
<tr>
<td>Using data callbacks</td>
<td>Getting information on newly received bus messages</td>
<td><a href="#example-using-data-callback-functions-to-get-information-on-can-bus-messages">Example: Using Data Callback Functions to Get Information on CAN Bus Messages</a></td>
</tr>
<tr>
<td>Sending data</td>
<td>Sending data to VEOS</td>
<td><a href="#example-sending-data">Example: Sending Data</a></td>
</tr>
<tr>
<td>Receiving data</td>
<td>Receiving data from VEOS</td>
<td><a href="#example-receiving-data">Example: Receiving Data</a></td>
</tr>
<tr>
<td>Running a polling-based co-simulation</td>
<td>Running a polling-based co-simulation</td>
<td><a href="#example-running-a-polling-based-simulation">Example: Running a Polling-Based Simulation</a></td>
</tr>
<tr>
<td>Handling I/O signals</td>
<td>Handling I/O signal communication for two client-server pairs.</td>
<td><a href="#example-handling-io-signals">Example: Handling I/O Signals</a></td>
</tr>
<tr>
<td>Optional clients</td>
<td>Simulation behavior for a CoSim server for which a client is optional.</td>
<td><a href="#example-optional-client">Example: Optional Client</a></td>
</tr>
</tbody>
</table>
<h3 id="requirements">Requirements</h3>
<p>You can work with the demo on Windows and Ubuntu 20.04 LTS.</p>
<p>Additionally, you must have the following:</p>
<ul>
<li>
<p>CMake 3.13 or higher</p>
</li>
<li>
<p>Either of the following compilers:</p>
<ul>
<li>
<p>GCC 10 or higher</p>
</li>
<li>
<p>MSVC 2022 or higher</p>
</li>
<li>
<p>Clang 10 or higher</p>
</li>
</ul>
</li>
</ul>
<h2 id="how-to-prepare-the-cosim-demo">How to Prepare the CoSim Demo</h2>
<h3 id="objective">Objective</h3>
<p>To prepare the CoSim demo by performing the following tasks:</p>
<ol>
<li>
<p>Setting up the CoSim example server. Refer to Part 1.</p>
</li>
<li>
<p>Setting up a CoSim test client. Refer to Part 2.</p>
</li>
</ol>
<h3 id="part-1-to-set-up-the-cosim-example-server">Part 1: To set up the CoSim example server</h3>
<ol>
<li>
<p>Create the DsVeosCoSimDemo directory in a directory of your choice.</p>
</li>
<li>
<p>In the DsVeosCoSimDemo directory, create a JSON file with the following content, where you have to replace &quot;file:///DsVeosCoSim.schema.json&quot; with the path where the VEOS CoSim JSON schema of your VEOS installation is saved. This defaults to &quot;file:///C:/Program Files/dSPACE VEOS 2023‑B/tools/schemas/DsVeosCoSim.schema.json&quot; on Windows and &quot;file:///opt/dspace/veos2023b/tools/schemas/DsVeosCoSim.schema.json&quot; on Linux.</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"file:///DsVeosCoSim.schema.json"</span>,
  <span class="hljs-attr">"Type"</span>: <span class="hljs-string">"DsVeosCoSim"</span>,
  <span class="hljs-attr">"Name"</span>: <span class="hljs-string">"CoSimExample"</span>,
  <span class="hljs-attr">"StepSize"</span>: <span class="hljs-number">0.001</span>,
  <span class="hljs-attr">"Network"</span>: {
    <span class="hljs-attr">"CAN"</span>: {
      <span class="hljs-attr">"CanController"</span>: {
        <span class="hljs-attr">"ClusterName"</span>: <span class="hljs-string">"HighSpeedCanCluster"</span>,
        <span class="hljs-attr">"BitsPerSecond"</span>: <span class="hljs-number">500000</span>,
        <span class="hljs-attr">"FlexibleDataRateBitsPerSecond"</span>: <span class="hljs-number">2000000</span>
      }
    }
  },
  <span class="hljs-attr">"IOSignals"</span>: {
    <span class="hljs-attr">"Outgoing"</span>: [
      {
        <span class="hljs-attr">"Name"</span>: <span class="hljs-string">"Signal1"</span>,
        <span class="hljs-attr">"DataType"</span>: <span class="hljs-string">"float64"</span>,
        <span class="hljs-attr">"PortName"</span>: <span class="hljs-string">"Port1"</span>
      }
    ]
  }
}
</div></code></pre>
</li>
<li>
<p>Save the JSON file under the file name Example.json.</p>
</li>
<li>
<p>In VEOS, create a new OSA and import the JSON file into it:</p>
<ul>
<li>
<p>On Windows, you can use VEOS Player:</p>
<p>Click <strong>Home</strong> - <strong>New</strong> to create a new OSA. Import the JSON file via drag &amp; drop. When the import is finished, press <strong>F12</strong> to save the OSA under a name of your choice.</p>
<p>Alternatively, you can use the VEOS Model Console like this:</p>
<pre class="hljs"><code><div>&lt;VEOS installation directory&gt;/bin/veos.exe model import -n ./VeosCoSimOsa.osa -p ./Example.json
</div></code></pre>
</li>
<li>
<p>On Linux:</p>
<pre class="hljs"><code><div>/opt/dspace/veos2023b/bin/veos model import \-n ./VeosCoSimOsa.osa -p ./Example.json
</div></code></pre>
</li>
</ul>
</li>
<li>
<p>Load the OSA to the simulator:</p>
<ul>
<li>
<p>On Windows, click Simulation - Load or use the VEOS Simulator Console in the command-line:</p>
<pre class="hljs"><code><div>&lt;VEOS installation directory&gt;/bin/veos.exe sim load ./VeosCoSimOsa.osa
</div></code></pre>
</li>
<li>
<p>On Linux:</p>
<pre class="hljs"><code><div>/opt/dspace/veos2023b/bin/veos sim load ./VeosCoSimOsa.osa
</div></code></pre>
</li>
</ul>
</li>
</ol>
<h3 id="interim-result">Interim result</h3>
<p>You created a JSON interface description file for a CoSim server, created an OSA in VEOS, imported the JSON file into the OSA, and loaded it to the simulator.</p>
<p>The CoSim server waits for a client to connect.</p>
<h3 id="part-2-to-set-up-a-cosim-test-client">Part 2: To set up a CoSim test client</h3>
<ol>
<li>
<p>Download the latest <code>veos-cosim-client-&lt;version&gt;.zip</code> archive from <a href="https://github.com/dspacegroup/veos-cosim-client">veos-cosim-client</a>.</p>
</li>
<li>
<p>Create the <code>ThirdParty/veos-cosim-client</code> subdirectory in the DsVeosCoSimDemo directory and extract the ZIP archive to this subfolder.</p>
</li>
<li>
<p>In the DsVeosCoSimDemo directory, create the <code>CMakeLists.txt</code> file with the following content:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">cmake_minimum_required</span>(VERSION <span class="hljs-number">3.13</span>)

<span class="hljs-keyword">project</span>(DsVeosCoSimDemo VERSION <span class="hljs-number">1.0</span>)

<span class="hljs-keyword">set</span>(CMAKE_CXX_STANDARD <span class="hljs-number">20</span>)
<span class="hljs-keyword">set</span>(CMAKE_CXX_STANDARD_REQUIRED <span class="hljs-keyword">TRUE</span>)

<span class="hljs-keyword">add_subdirectory</span>(ThirdParty/veos-cosim-client)

<span class="hljs-keyword">add_executable</span>(<span class="hljs-variable">${PROJECT_NAME}</span> main.cpp)
<span class="hljs-keyword">target_link_libraries</span>(<span class="hljs-variable">${PROJECT_NAME}</span> PRIVATE DsVeosCoSim)
</div></code></pre>
</li>
<li>
<p>Also in the DsVeosCoSimDemo directory, create the main.cpp file with the following content:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iomanip&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sstream&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"DsVeosCoSim/DsVeosCoSim.h"</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
</li>
<li>
<p>In the DsVeosCoSimDemo directory, run the following commands to create a build directory, configure the build project, and compile the test executable:</p>
<pre class="hljs"><code><div>mkdir build
cd build
cmake ..
cmake --build .
</div></code></pre>
<blockquote>
<p><strong>Note</strong></p>
<p>If you use Visual Studio on Windows, make sure to run these commands in the Visual Studio Developer Command Prompt.</p>
</blockquote>
</li>
<li>
<p>Test the executable by running the following command in the build subdirectory:</p>
<ul>
<li>
<p>On Windows:</p>
<pre class="hljs"><code><div>.\Debug\DsVeosCoSimDemo.exe
</div></code></pre>
</li>
<li>
<p>On Linux:</p>
<pre class="hljs"><code><div>./Debug/DsVeosCoSimDemo
</div></code></pre>
</li>
</ul>
<p>The executable simply returns without any message.</p>
</li>
</ol>
<h3 id="result">Result</h3>
<p>You set up a basic CoSim server in VEOS and set up a build project for CoSim clients. You also created a simple test executable to confirm the build project was configured correctly.</p>
<h3 id="next-steps">Next steps</h3>
<p>You can now proceed to build a simple example CoSim client and use it in a co-simulation with the CoSim server you set up in Part 1.</p>
<p>Refer to <a href="#example-setting-up-a-basic-co-simulation">Example: Setting Up a Basic Co-Simulation</a>.</p>
<h2 id="example-setting-up-a-basic-co-simulation">Example: Setting Up a Basic Co-Simulation</h2>
<h3 id="introduction">Introduction</h3>
<p>This example shows how to create a basic CoSim client which connects to the CoSim server in VEOS and reports on its progress via log callbacks.</p>
<h3 id="precondition">Precondition</h3>
<p>You must have made the preparations described in <a href="#how-to-prepare-the-cosim-demo">How to Prepare the CoSim Demo</a>.</p>
<h3 id="how-to-set-up-the-client">How to set up the client</h3>
<ol>
<li>
<p>Replace the content of <code>main.cpp</code> with the following code and save it:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iomanip&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sstream&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"DsVeosCoSim/DsVeosCoSim.h"</span></span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnLogCallback</span><span class="hljs-params">(DsVeosCoSim_Severity severity, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* logMessage)</span> </span>{
    <span class="hljs-keyword">switch</span> (severity) {
        <span class="hljs-keyword">case</span> DsVeosCoSim_Severity_Error:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"ERROR "</span> &lt;&lt; logMessage &lt;&lt; <span class="hljs-string">"\n"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DsVeosCoSim_Severity_Warning:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"WARN  "</span> &lt;&lt; logMessage &lt;&lt; <span class="hljs-string">"\n"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DsVeosCoSim_Severity_Info:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"INFO  "</span> &lt;&lt; logMessage &lt;&lt; <span class="hljs-string">"\n"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DsVeosCoSim_Severity_Trace:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"TRACE "</span> &lt;&lt; logMessage &lt;&lt; <span class="hljs-string">"\n"</span>;
            <span class="hljs-keyword">break</span>;
    }
}

<span class="hljs-comment">// Called after every interval specified in the StepSize parameter of the Example.json file</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnEndStep</span><span class="hljs-params">(DsVeosCoSim_SimulationTime simulationTime, <span class="hljs-keyword">void</span>* userData)</span> </span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Step callback received at "</span> &lt;&lt; DSVEOSCOSIM_SIMULATION_TIME_TO_SECONDS(simulationTime) &lt;&lt; <span class="hljs-string">" s.\n"</span>;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// Step 1: Enable logging</span>
    DsVeosCoSim_SetLogCallback(OnLogCallback);

    <span class="hljs-comment">// Step 2: Create a handle for the client</span>
    DsVeosCoSim_Handle handle = DsVeosCoSim_Create();
    <span class="hljs-keyword">if</span> (handle == <span class="hljs-literal">nullptr</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    }

    <span class="hljs-comment">// Step 3: Connect to the Example server that is running in VEOS</span>
    DsVeosCoSim_ConnectConfig connectConfig{};
    connectConfig.serverName = <span class="hljs-string">"CoSimExample"</span>;
    <span class="hljs-keyword">if</span> (DsVeosCoSim_Connect(handle, connectConfig) != DsVeosCoSim_Result_Ok) {
        DsVeosCoSim_Destroy(handle);
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    }

    <span class="hljs-comment">// Step 4: Run a callback-based co-simulation</span>
    DsVeosCoSim_Callbacks callbacks{};
    callbacks.simulationEndStepCallback = OnEndStep;
    callbacks.userData = handle; <span class="hljs-comment">// Pass the handle to every callback</span>
    <span class="hljs-keyword">if</span> (DsVeosCoSim_RunCallbackBasedCoSimulation(handle, callbacks) != DsVeosCoSim_Result_Disconnected) {
        DsVeosCoSim_Disconnect(handle);
        DsVeosCoSim_Destroy(handle);
    }

    DsVeosCoSim_Destroy(handle);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; 
}
</div></code></pre>
</li>
<li>
<p>In the build directory, call <code>cmake --build .</code> to build the executable.</p>
</li>
</ol>
<h3 id="what-it-does">What it does</h3>
<ul>
<li>
<p>The <code>OnLogCallback</code> function prints log messages corresponding to the severity level. It is registered by the
<a href="#dsveoscosim_setlogcallback-function">DsVeosCoSim_SetLogCallback Function</a> in <code>Step 1</code>.</p>
</li>
<li>
<p>In <code>Step 2</code>, a handle for the client is created which is used by all the other functions.</p>
<p>Only one handle can be connected to one CoSim server in the VEOS simulator. However, a client can create multiple handles and connect them to other CoSim
servers on the same or other VEOS simulators.</p>
</li>
<li>
<p>In <code>Step 3</code>, a connection to the Example server running in VEOS is established via the <a href="#dsveoscosim_connect-function">DsVeosCoSim_Connect Function</a>.</p>
<p><strong>Tip:</strong></p>
<ul>
<li>
<p>The client can also connect to a server that is running on a different computer. In this case, you have to add
<code>connectConfig.remoteIpAddress = &quot;&lt;IP address&gt;&quot;;</code>.</p>
</li>
<li>
<p>The Example server uses a dynamic TCP port and a port mapper. However, if you specified a static TCP port, you have to provide this to the client via
<code>DsVeosCoSim_ConnectConfig.remotePort</code>. For more information, refer to <a href="#connecting-to-a-cosim-server">Connecting to a CoSim server</a>.</p>
</li>
</ul>
</li>
<li>
<p>In <code>Step 4</code> a callback-based co-simulation is started. The <a href="#dsveoscosim_runcallbackbasedcosimulation-function">DsVeosCoSim_RunCallbackBasedCoSimulation Function</a> blocks
until either <a href="#dsveoscosim_disconnect-function">DsVeosCoSim_Disconnect Function</a> is called by a callback function or the simulation is unloaded in VEOS. Therefore, the
expected return value is <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result_Disconnected</a> instead of <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result_Ok</a>.</p>
<p>In this example, the <code>simulationEndStepCallback</code> is called at the end of each simulation step and prints the corresponding simulation time in seconds as
specified in the OnEndStep function definition.</p>
<p><strong>Tip:</strong>
You can also run polling-based co-simulations. Refer to <a href="#example-running-a-polling-based-simulation">Example: Running a Polling-Based Simulation</a> for an example.</p>
</li>
</ul>
<h3 id="running-the-co-simulation">Running the co-simulation</h3>
<ol>
<li>
<p>Load the VeosCoSim.osa you created in <a href="#how-to-prepare-the-cosim-demo">How to Prepare the CoSim Demo</a> to the VEOS simulator.</p>
</li>
<li>
<p>From the <code>DsVeosCoSimDemo/build</code> subdirectory, run the executable you built in How to set up the client via</p>
<pre class="hljs"><code><div>.\Debug\DsVeosCoSimDemo.exe
</div></code></pre>
<p>on Windows or</p>
<pre class="hljs"><code><div>./Debug/DsVeosCoSimDemo
</div></code></pre>
<p>on Linux.</p>
</li>
<li>
<p>Start the simulation in VEOS:</p>
<ul>
<li>
<p>On Windows, click <strong>Simulation</strong> - <strong>Start</strong> in the VEOS Player or use the VEOS Simulator Console in the command-line:</p>
<pre class="hljs"><code><div>&lt;VEOS installation directory&gt;/bin/veos.exe sim start
</div></code></pre>
</li>
<li>
<p>On Linux:</p>
<pre class="hljs"><code><div>/opt/dspace/veos2023b/bin/veos sim start
</div></code></pre>
</li>
</ul>
</li>
</ol>
<h3 id="client-output">Client output</h3>
<p>The following listing shows the output produced by the client:</p>
<pre class="hljs"><code><div>INFO  Obtaining TCP port of dSPACE VEOS CoSim server 'CoSimExample' at 127.0.0.1 ...
INFO  Connecting to dSPACE VEOS CoSim server 'CoSimExample' at 127.0.0.1:50212 ...
INFO  Connected to dSPACE VEOS CoSim server 'CoSimExample' at 127.0.0.1:50212.
Step callback received at 0 s.
Step callback received at 0.001 s.
Step callback received at 0.002 s.
Step callback received at 0.003 s.
...
</div></code></pre>
<h2 id="example-implementing-simulation-state-change-callbacks">Example: Implementing Simulation State Change Callbacks</h2>
<h3 id="introduction">Introduction</h3>
<p>This example shows how to implement simulation state change callbacks in a CoSim client.</p>
<h3 id="preconditions">Preconditions</h3>
<ul>
<li>
<p>You must have made the preparations described in <a href="#how-to-prepare-the-cosim-demo">How to Prepare the CoSim Demo</a>.</p>
</li>
<li>
<p>You must have created the basic CoSim client described in <a href="#example-setting-up-a-basic-co-simulation">Example: Setting Up a Basic Co-Simulation</a>.</p>
</li>
</ul>
<h3 id="how-to-set-up-the-client">How to set up the client</h3>
<ol>
<li>
<p>In the <code>main.cpp</code> code, replace the OnEndStep function definition starting in line <code>22</code> with the following code:</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnEndStep</span><span class="hljs-params">(DsVeosCoSim_SimulationTime simulationTime, <span class="hljs-keyword">void</span>* userData)</span> </span>{
    <span class="hljs-comment">// Disable output for each step to make the messages more readable</span>
    <span class="hljs-comment">// std::cout &lt;&lt; "Step callback received at " &lt;&lt; DSVEOSCOSIM_SIMULATION_TIME_TO_SECONDS(simulationTime) &lt;&lt; " s.\n";</span>
}

<span class="hljs-comment">// Called when the simulation starts</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnStarted</span><span class="hljs-params">(DsVeosCoSim_SimulationTime simulationTime, <span class="hljs-keyword">void</span>* userData)</span> </span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Simulation started at "</span> &lt;&lt; DSVEOSCOSIM_SIMULATION_TIME_TO_SECONDS(simulationTime) &lt;&lt; <span class="hljs-string">" s.\n"</span>;
}

<span class="hljs-comment">// Called when the simulation stops</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnStopped</span><span class="hljs-params">(DsVeosCoSim_SimulationTime simulationTime, <span class="hljs-keyword">void</span>* userData)</span> </span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Simulation stopped at "</span> &lt;&lt; DSVEOSCOSIM_SIMULATION_TIME_TO_SECONDS(simulationTime) &lt;&lt; <span class="hljs-string">" s.\n"</span>;
}

<span class="hljs-comment">// Called when the simulation pauses</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnPaused</span><span class="hljs-params">(DsVeosCoSim_SimulationTime simulationTime, <span class="hljs-keyword">void</span>* userData)</span> </span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Simulation paused at "</span> &lt;&lt; DSVEOSCOSIM_SIMULATION_TIME_TO_SECONDS(simulationTime) &lt;&lt; <span class="hljs-string">" s.\n"</span>;
}

<span class="hljs-comment">// Called when the simulation continues</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnContinued</span><span class="hljs-params">(DsVeosCoSim_SimulationTime simulationTime, <span class="hljs-keyword">void</span>* userData)</span> </span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Simulation continued at "</span> &lt;&lt; DSVEOSCOSIM_SIMULATION_TIME_TO_SECONDS(simulationTime) &lt;&lt; <span class="hljs-string">" s.\n"</span>;
}
</div></code></pre>
</li>
<li>
<p>In the <code>main</code> function definition, add the following callbacks below line <code>46</code> of the original listing:</p>
<pre class="hljs"><code><div>callbacks.simulationStartedCallback = OnStarted;
callbacks.simulationStoppedCallback = OnStopped;
callbacks.simulationPausedCallback = OnPaused;
callbacks.simulationContinuedCallback = OnContinued;
</div></code></pre>
</li>
<li>
<p>Save the <code>main.cpp</code> file and call <code>cmake --build .</code> to build the executable.</p>
</li>
</ol>
<h3 id="what-it-does">What it does</h3>
<p>The additional callback functions are called each time the simulation state changes and print corresponding messages.</p>
<h3 id="running-the-co-simulation">Running the co-simulation</h3>
<ol>
<li>
<p>Load the <code>DsVeosCoSim.osa</code> you created in <a href="#how-to-prepare-the-cosim-demo">How to Prepare the CoSim Demo</a> to the VEOS simulator.</p>
</li>
<li>
<p>From the <code>DsVeosCoSimDemo/build</code> subdirectory, run the executable you built in
<a href="#example-implementing-simulation-state-change-callbacks">Example: Implementing Simulation State Change Callbacks</a> via</p>
<pre class="hljs"><code><div>.\Debug\DsVeosCoSimDemo.exe
</div></code></pre>
<p>on Windows or</p>
<pre class="hljs"><code><div>./Debug/DsVeosCoSimDemo
</div></code></pre>
<p>on Linux.</p>
</li>
<li>
<p>Start the simulation in VEOS:</p>
<ul>
<li>
<p>On Windows, click <strong>Simulation</strong> - <strong>Start</strong> in the VEOS Player or use the VEOS Simulator Console in the command-line:</p>
<pre class="hljs"><code><div>&lt;VEOS installation directory&gt;\bin\veos.exe sim start
</div></code></pre>
</li>
<li>
<p>On Linux:</p>
<pre class="hljs"><code><div>/opt/dspace/veos2023b/bin/veos sim start
</div></code></pre>
</li>
</ul>
</li>
<li>
<p>Change the simulation state, e.g., by pressing <strong>Pause</strong>, <strong>Step</strong>, and <strong>Stop</strong> in the VEOS Player or using the related commands of the VEOS Simulator
Console.</p>
</li>
</ol>
<h3 id="client-output">Client output</h3>
<p>The following listing shows the client output for the simulation state changes:</p>
<pre class="hljs"><code><div>INFO  Obtaining TCP port of dSPACE VEOS CoSim server 'CoSimExample' at 127.0.0.1 ...
INFO  Connecting to dSPACE VEOS CoSim server 'CoSimExample' at 127.0.0.1:61385 ...
INFO  Connected to dSPACE VEOS CoSim server 'CoSimExample' at 127.0.0.1:61385.
Simulation started at 0 s.
Simulation paused at 3.51 s.
Simulation continued at 3.51 s.
Simulation paused at 3.511 s.
Simulation stopped at 3.511 s.
</div></code></pre>
<h2 id="example-accessing-the-data-interface">Example: Accessing the Data Interface</h2>
<h3 id="introduction">Introduction</h3>
<p>This example shows how to access the VEOS CoSim data interface to get information on available bus controllers and I/O signals.</p>
<h3 id="preconditions">Preconditions</h3>
<ul>
<li>
<p>You must have made the preparations described in <a href="#how-to-prepare-the-cosim-demo">How to Prepare the CoSim Demo</a>.</p>
</li>
<li>
<p>You must have created the basic CoSim client described in <a href="#example-setting-up-a-basic-co-simulation">Example: Setting Up a Basic Co-Simulation</a>.</p>
</li>
</ul>
<h3 id="how-to-set-up-the-client">How to set up the client</h3>
<ol>
<li>
<p>In the <code>main.cpp</code> code of the basic example, add the following declarations directly below the includes:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">uint32_t</span> canControllersCount{};
<span class="hljs-keyword">const</span> DsVeosCoSim_CanController* canControllers{};
<span class="hljs-keyword">uint32_t</span> outgoingSignalsCount{};
<span class="hljs-keyword">const</span> DsVeosCoSim_IoSignal* outgoingSignals{};
</div></code></pre>
</li>
<li>
<p>Add the following code to Step 3 of the main function:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">if</span> (DsVeosCoSim_GetCanControllers(handle, &amp;canControllersCount, &amp;canControllers) != DsVeosCoSim_Result_Ok) {
        DsVeosCoSim_Disconnect(handle);
        DsVeosCoSim_Destroy(handle);
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
}

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">uint32_t</span> i = <span class="hljs-number">0</span>; i &lt; canControllersCount; i++) {
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Found CAN controller '"</span> &lt;&lt; canControllers[i].name &lt;&lt; <span class="hljs-string">"'\n"</span>;
}

<span class="hljs-keyword">if</span> (DsVeosCoSim_GetOutgoingSignals(handle, &amp;outgoingSignalsCount, &amp;outgoingSignals) != DsVeosCoSim_Result_Ok) {
        DsVeosCoSim_Disconnect(handle);
        DsVeosCoSim_Destroy(handle);
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
}

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">uint32_t</span> i = <span class="hljs-number">0</span>; i &lt; outgoingSignalsCount; i++) {
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Found outgoing signal '"</span> &lt;&lt; outgoingSignals[i].name &lt;&lt; <span class="hljs-string">"'\n"</span>;
}
</div></code></pre>
</li>
<li>
<p>Save the <code>main.cpp</code> file and call <code>cmake --build .</code> to build the executable.</p>
</li>
</ol>
<h3 id="what-it-does">What it does</h3>
<ul>
<li>
<p>First, the client collects information on the available CAN controllers via the <a href="#dsveoscosim_getcancontrollers-function">DsVeosCoSim_GetCanControllers Function</a>.</p>
</li>
<li>
<p>It then prints the name of each CAN controller.</p>
</li>
<li>
<p>Then it does the same for the outgoing I/O signals.</p>
</li>
</ul>
<h3 id="running-the-co-simulation">Running the co-simulation</h3>
<ol>
<li>
<p>Load the <code>DsVeosCoSim.osa</code> you created in <a href="#how-to-prepare-the-cosim-demo">How to Prepare the CoSim Demo</a> to the VEOS simulator.</p>
</li>
<li>
<p>From the <code>DsVeosCoSimDemo/build</code> subdirectory, run the executable you built in
<a href="#example-accessing-the-data-interface">Example: Accessing The Data Interface</a> via</p>
<pre class="hljs"><code><div>.\Debug\DsVeosCoSimDemo.exe
</div></code></pre>
<p>on Windows or</p>
<pre class="hljs"><code><div>./Debug/DsVeosCoSimDemo
</div></code></pre>
<p>on Linux.</p>
</li>
<li>
<p>Start the simulation in VEOS:</p>
<ul>
<li>
<p>On Windows, click <strong>Simulation</strong> - <strong>Start</strong> in the VEOS Player or use the VEOS Simulator Console in the command-line:</p>
<pre class="hljs"><code><div>&lt;VEOS installation directory&gt;\bin\veos.exe sim start
</div></code></pre>
</li>
<li>
<p>On Linux:</p>
<pre class="hljs"><code><div>/opt/dspace/veos2023b/bin/veos sim start
</div></code></pre>
</li>
</ul>
</li>
</ol>
<h3 id="client-output">Client output</h3>
<p>The following listing shows the output produced by the client:</p>
<pre class="hljs"><code><div>Found CAN controller 'CanController'
Found outgoing signal 'Port1/Signal1'
</div></code></pre>
<h2 id="example-using-data-callback-functions-to-get-information-on-can-bus-messages">Example: Using Data Callback Functions to Get Information on CAN Bus Messages</h2>
<h3 id="introduction">Introduction</h3>
<p>This example demonstrates how to use data callbacks to get information on received CAN bus messages.</p>
<p>In addition to modifying the basic example client, you have to modify the <code>DsVeosCoSim.osa</code> by adding a V-ECU with
a CAN controller so that there are CAN bus messages for the CoSim server to receive.</p>
<h3 id="preconditions">Preconditions</h3>
<ul>
<li>
<p>You must have made the preparations described in <a href="#how-to-prepare-the-cosim-demo">How to Prepare the CoSim Demo</a>.</p>
</li>
<li>
<p>You must have created the basic CoSim client described in Example: Setting Up a Basic Co-Simulation.</p>
</li>
<li>
<p>You must have a VEOS installation on Windows and copied the VEOS demos to your Documents folder via <strong>File</strong> - <strong>Copy Demo Files</strong> in the VEOS Player.</p>
</li>
<li>
<p>To work through this example on Linux, you must additionally copy the <code>Controller.vecu</code> from the <code>&lt;Documents folder&gt;\2Ecu_CanBusSimulation</code> folder
of the Windows VEOS installation to the Linux system and build it like this (assuming you copied the <code>Controller.vecu</code> to your current working directory):</p>
<pre class="hljs"><code><div>/opt/dspace/veos2023b/bin/veos build classic-vecu ./2Ecu_CanBusSimulationController.vecu -o ./Controller.osa
</div></code></pre>
</li>
</ul>
<h3 id="how-to-set-up-the-client">How to set up the client</h3>
<ol>
<li>
<p>In the <code>main.cpp</code> code, comment out the output of the <code>OnEndStep</code> function definition to make the output more readable:</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnEndStep</span><span class="hljs-params">(DsVeosCoSim_SimulationTime simulationTime, <span class="hljs-keyword">void</span>* userData)</span> </span>{
    <span class="hljs-comment">// std::cout &lt;&lt; "Step callback received at " &lt;&lt; DSVEOSCOSIM_SIMULATION_TIME_TO_SECONDS(simulationTime) &lt;&lt; " s.\n"</span>
}
</div></code></pre>
</li>
<li>
<p>Add the following code above the <code>main</code> function:</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> <span class="hljs-title">DataToString</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span>* data, <span class="hljs-keyword">uint32_t</span> dataLength, <span class="hljs-keyword">char</span> separator = <span class="hljs-number">0</span>)</span> </span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">ostringstream</span> oss;
    oss &lt;&lt; <span class="hljs-built_in">std</span>::hex &lt;&lt; <span class="hljs-built_in">std</span>::setfill(<span class="hljs-string">'0'</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">uint32_t</span> i = <span class="hljs-number">0</span>; i &lt; dataLength; i++) {
        oss &lt;&lt; <span class="hljs-built_in">std</span>::setw(<span class="hljs-number">2</span>) &lt;&lt; <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">int</span>&gt;(data[i]);
        <span class="hljs-keyword">if</span> ((i &lt; dataLength - <span class="hljs-number">1</span>) &amp;&amp; separator != <span class="hljs-number">0</span>) {
            oss &lt;&lt; separator;
        }
    }

    <span class="hljs-keyword">return</span> oss.str();
}

<span class="hljs-comment">// Will be called when a CAN message was received</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnCanMessage</span><span class="hljs-params">(DsVeosCoSim_SimulationTime simulationTime,
                <span class="hljs-keyword">const</span> DsVeosCoSim_CanController* canController,
                <span class="hljs-keyword">const</span> DsVeosCoSim_CanMessage* message,
                <span class="hljs-keyword">void</span>* userData)</span> </span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Received CAN message with ID "</span> &lt;&lt; message-&gt;id &lt;&lt; <span class="hljs-string">" with data "</span>
            &lt;&lt; DataToString(message-&gt;data, message-&gt;length, <span class="hljs-string">'-'</span>) &lt;&lt; <span class="hljs-string">" from CAN controller "</span>
            &lt;&lt; canController-&gt;name &lt;&lt; <span class="hljs-string">" at "</span>
            &lt;&lt; DSVEOSCOSIM_SIMULATION_TIME_TO_SECONDS(simulationTime) &lt;&lt; <span class="hljs-string">" s.\n"</span>;
}
</div></code></pre>
</li>
<li>
<p>In the main function, add the callback:</p>
<pre class="hljs"><code><div>callbacks.canMessageReceivedCallback = OnCanMessage;
</div></code></pre>
</li>
<li>
<p>Save the <code>main.cpp</code> file and call <code>cmake --build .</code> to build the executable.</p>
</li>
</ol>
<h3 id="what-it-does">What it does</h3>
<p>Each time the CoSim server receives a CAN bus message, the <code>OnCanMessage</code> callback function prints the message ID,
the name of the CAN controller from which the message was received, and the corresponding simulation time.</p>
<h3 id="how-to-modify-the-osa">How to modify the OSA</h3>
<ol>
<li>
<p>Import the <code>Controller</code> V-ECU from the <code>2Ecu_CanBusSimulation</code> demo into the <code>DsVeosCoSim.osa</code>:</p>
<ul>
<li>
<p>In the VEOS Player:</p>
<p>Drag &amp; drop the <code>Controller.vecu</code> file from the <code>2Ecu_CanBusSimulation</code> folder in the Documents folder into the simulation system.</p>
<p>In the dialog that opens, click <strong>Build</strong> to complete the import.</p>
</li>
<li>
<p>In the command line (from the directory in which the <code>DsVeosCoSim.osa</code> is saved):</p>
<p>On Windows:</p>
<pre class="hljs"><code><div>&lt;VEOS installation folder&gt;\bin\veos.exe model import -p &lt;Documents folder&gt;\2Ecu_CanBusSimulation\AR_PosControl_2Ecus_Can.osa --vpus Controller .\DsVeosCoSim.osa
</div></code></pre>
<p>On Linux:</p>
<pre class="hljs"><code><div>/opt/dspace/veos2023b/bin/veos model import -p &lt;Controller.osa folder&gt;/Controller.osa ./DsVeosCoSim.osa
</div></code></pre>
</li>
</ul>
</li>
<li>
<p>Connect the CanCommunicationController of the Controller V-ECU to the CanCluster communication cluster:</p>
<ul>
<li>
<p>In the VEOS Player:</p>
<p>Click on <strong>Home</strong> - <strong>Autoconnect</strong> - <strong>Autoconnect communication controllers</strong> in the VEOS Player.</p>
</li>
<li>
<p>In the command line (from the directory in which the <code>DsVeosCoSim.osa</code> is saved):</p>
<p>On Windows:</p>
<pre class="hljs"><code><div>&lt;VEOS installation folder&gt;\bin\veos.exe model connect .\DsVeosCoSim.osa --autoconnect-communication-controllers
</div></code></pre>
<p>On Linux:</p>
<pre class="hljs"><code><div>/opt/dspace/veos2023b/bin/veos model connect ./DsVeosCoSim.osa --autoconnect-communication-controllers
</div></code></pre>
</li>
</ul>
</li>
<li>
<p>Save the <code>DsVeosCoSim.osa</code>.</p>
</li>
</ol>
<h3 id="running-the-co-simulation">Running the co-simulation</h3>
<ol>
<li>
<p>Load the modified <code>DsVeosCoSim.osa</code> to the VEOS simulator.</p>
</li>
<li>
<p>In your <code>DsVeosCoSimDemo/build</code> directory, run the executable you built in
<a href="#example-using-data-callback-functions-to-get-information-on-can-bus-messages">Example: Using Data Callback Functions to Get Information on CAN Bus Messages</a> via</p>
<pre class="hljs"><code><div>.\Debug\DsVeosCoSimDemo.exe
</div></code></pre>
<p>on Windows or</p>
<pre class="hljs"><code><div>./Debug/DsVeosCoSimDemo
</div></code></pre>
<p>on Linux.</p>
</li>
<li>
<p>Start the simulation in VEOS:</p>
<ul>
<li>
<p>On Windows, click <strong>Simulation</strong> - <strong>Start</strong> in the VEOS Player or use the VEOS Simulator Console in the command-line:</p>
<pre class="hljs"><code><div>&lt;VEOS installation directory&gt;/bin/veos.exe sim start
</div></code></pre>
</li>
<li>
<p>On Linux:</p>
<pre class="hljs"><code><div>/opt/dspace/veos2023b/bin/veos sim start
</div></code></pre>
</li>
</ul>
</li>
</ol>
<h3 id="client-output">Client output</h3>
<p>The following listing shows the output produced by the client:</p>
<pre class="hljs"><code><div>Received CAN message with ID 10 and data 00-00 from bus controller CanController at 0.002 s.
Received CAN message with ID 10 and data 00-00 from bus controller CanController at 0.022 s.
Received CAN message with ID 10 and data 00-00 from bus controller CanController at 0.042 s.
Received CAN message with ID 10 and data 00-00 from bus controller CanController at 0.062 s.
</div></code></pre>
<h2 id="example-sending-data">Example: Sending Data</h2>
<h3 id="introduction">Introduction</h3>
<p>The CoSim client can send data to other co-simulation participants via the CoSim server. This example demonstrates how to send a simple CAN message.</p>
<h3 id="preconditions">Preconditions</h3>
<ul>
<li>
<p>You must have made the preparations described in <a href="#how-to-prepare-the-cosim-demo">How to Prepare the CoSim Demo</a>.</p>
</li>
<li>
<p>You must have created the basic CoSim client described in <a href="#example-setting-up-a-basic-co-simulation">Example: Setting Up a Basic Co-Simulation</a>.</p>
</li>
<li>
<p>You must have modified the basic <code>DsVeosCoSim.osa</code> as described in
<a href="#example-using-data-callback-functions-to-get-information-on-can-bus-messages">Example: Using Data Callback Functions to Get Information on CAN Bus Messages</a>.</p>
</li>
</ul>
<h3 id="how-to-set-up-the-client">How to set up the client</h3>
<ol>
<li>
<p>In the <code>main.cpp</code> code of <a href="#example-setting-up-a-basic-co-simulation">Example: Setting Up a Basic Co-Simulation</a>, change the <code>OnEndStep</code> function definition to
this:</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnEndStep</span><span class="hljs-params">(DsVeosCoSim_SimulationTime simulationTime, <span class="hljs-keyword">void</span>* userData)</span> </span>{
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span> data[<span class="hljs-number">1</span>]{<span class="hljs-number">42</span>};
    <span class="hljs-keyword">const</span> DsVeosCoSim_Handle handle = userData;
    DsVeosCoSim_CanMessage canMessage{};
    canMessage.id = <span class="hljs-number">12</span>;
    canMessage.flags = DsVeosCoSim_CanMessageFlags_FlexibleDataRateFormat;
    canMessage.length = <span class="hljs-number">1</span>;
    canMessage.data = data;
    <span class="hljs-keyword">const</span> DsVeosCoSim_Result result = DsVeosCoSim_TransmitCanMessage(handle, &amp;canMessage);
    <span class="hljs-keyword">if</span> (result == DsVeosCoSim_Result_Full) {
        <span class="hljs-comment">// No more space in the internal buffer</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (result != DsVeosCoSim_Result_Ok) {
        DsVeosCoSim_Disconnect(handle);
        <span class="hljs-keyword">return</span>;
    }
}
</div></code></pre>
</li>
<li>
<p>Save the <code>main.cpp</code> file and call <code>cmake --build .</code> to build the executable.</p>
</li>
</ol>
<h3 id="what-it-does">What it does</h3>
<p>When the <code>OnEndStep</code> function is called, it specifies a CAN message with the following characteristics:</p>
<ul>
<li>
<p>Message ID <code>12</code></p>
</li>
<li>
<p>Flexible Data Rate flag, i.e., <code>CAN FD</code></p>
</li>
<li>
<p>Message length <code>1</code> byte</p>
</li>
<li>
<p>Payload <code>42</code></p>
</li>
</ul>
<p>The function then calls the <a href="#dsveoscosim_transmitcanmessage-function">DsVeosCoSim_TransmitCanMessage Function</a>, which transmits the message to the <code>Controller</code> VPU via the CoSim server.</p>
<h3 id="running-the-co-simulation">Running the co-simulation</h3>
<ol>
<li>
<p>Enable the generation of bus log files in VEOS:</p>
<ul>
<li>
<p>On Windows, enable the checkbox <strong>Generate bus log files</strong> in <strong>File</strong> - <strong>Preferences</strong> - <strong>Log Options</strong> in the VEOS Player.</p>
<p>Alternatively, you can use the VEOS Simulator Console in the command-line:</p>
<pre class="hljs"><code><div>&lt;VEOS installation directory&gt;/bin/veos.exe sim config --enable-bus-log
</div></code></pre>
</li>
<li>
<p>On Linux:</p>
<pre class="hljs"><code><div>/opt/dspace/veos2023b/bin/veos sim config --enable-bus-log
</div></code></pre>
</li>
</ul>
</li>
<li>
<p>Load the <code>DsVeosCoSim.osa</code> you created in
<a href="#example-using-data-callback-functions-to-get-information-on-can-bus-messages">Example: Using Data Callback Functions to Get Information on CAN Bus Messages</a> to the
VEOS simulator.</p>
<p>VEOS displays a message to inform you that bus logging was enabled. In the VEOS Player, direct links to the files are displayed in the <strong>Messages</strong> pane.</p>
</li>
<li>
<p>In your DsVeosCoSimDemo/build directory, run the executable you built before in <a href="#example-sending-data">Example: Sending Data</a> via</p>
<pre class="hljs"><code><div>.\Debug\DsVeosCoSimDemo.exe
</div></code></pre>
<p>on Windows or</p>
<pre class="hljs"><code><div>./Debug/DsVeosCoSimDemo
</div></code></pre>
<p>on Linux.</p>
</li>
<li>
<p>Start the simulation in VEOS.</p>
</li>
</ol>
<h3 id="bus-log-files">Bus log files</h3>
<p>The <code>CoSimExample.BusTransfer.log</code> file contains entries for the bus messages transmitted and received by the CoSim server. The following listing shows an
excerpt:</p>
<pre class="hljs"><code><div>Time,DeltaTime,ControllerID,MsgID,Dir,DataLen,Data,Type,DatabaseID
0000.0001,0000.0001,1,12,1,1,2A,C,-1
0000.0011,0000.0001,1,12,1,1,2A,C,-1
0000.0013,0000.0002,1,10,0,2,00-00,C,-1
</div></code></pre>
<p>The first two messages are transmitted messages, which you can see by comparing the MsgID, DataLen, and Data columns with the settings listed in
<a href="#example-sending-data">Example: Sending Data</a>. <code>2A</code> is the hexadecimal representation of <code>42</code>. Additionally, the Dir column displays <code>1</code> for transmitted
messages and <code>0</code> for received messages.</p>
<p>The third message is a received message from the Controller V-ECU.</p>
<p>You can compare the <code>CoSimExample.BusTransfer.log</code> file to the <code>Controller.BusTransfer.log</code> log file, which shows the same entries except for the Dir column:</p>
<pre class="hljs"><code><div>Time,DeltaTime,ControllerID,MsgID,Dir,DataLen,Data,Type,DatabaseID
0000.0001,0000.0001,0,12,0,1,2A,C,-1
0000.0011,0000.0001,0,12,0,1,2A,C,-1
0000.0013,0000.0002,0,10,1,2,00-00,C,-1
</div></code></pre>
<h2 id="example-receiving-data">Example: Receiving Data</h2>
<h3 id="introduction">Introduction</h3>
<p>This example shows how to receive data from other co-simulation participants using receive functions instead of data callbacks.</p>
<h3 id="preconditions">Preconditions</h3>
<ul>
<li>
<p>You must have made the preparations described in <a href="#how-to-prepare-the-cosim-demo">How to Prepare the CoSim Demo</a>.</p>
</li>
<li>
<p>You must have created the basic CoSim client described in <a href="#example-setting-up-a-basic-co-simulation">Example: Setting Up a Basic Co-Simulation</a>.</p>
</li>
<li>
<p>You must have modified the <code>DsVeosCoSim.osa</code> as described in
<a href="#example-using-data-callback-functions-to-get-information-on-can-bus-messages">Example: Using Data Callback Functions to Get Information on CAN Bus Messages</a>.</p>
</li>
</ul>
<h3 id="how-to-set-up-the-client">How to set up the client</h3>
<ol>
<li>
<p>In the <code>main.cpp</code> code of the basic example, change the <code>OnEndStep</code> function definition to this:</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnEndStep</span><span class="hljs-params">(DsVeosCoSim_SimulationTime simulationTime, <span class="hljs-keyword">void</span>* userData)</span> </span>{
    <span class="hljs-keyword">const</span> DsVeosCoSim_Handle handle = userData;
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        DsVeosCoSim_CanMessage message{};
        <span class="hljs-keyword">const</span> DsVeosCoSim_Result result = DsVeosCoSim_ReceiveCanMessage(handle, &amp;message);
        <span class="hljs-keyword">if</span> (result == DsVeosCoSim_Result_Ok) {
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Received CAN message with ID "</span> &lt;&lt; message.id &lt;&lt; <span class="hljs-string">" at "</span> &lt;&lt; 
            DSVEOSCOSIM_SIMULATION_TIME_TO_SECONDS(simulationTime) &lt;&lt; <span class="hljs-string">" s.\n"</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (result == DsVeosCoSim_Result_Empty) {
            <span class="hljs-comment">// No more messages</span>
            <span class="hljs-keyword">break</span>;
        } <span class="hljs-keyword">else</span> {
            DsVeosCoSim_Disconnect(handle);
            <span class="hljs-keyword">return</span>;
        }
    }
}
</div></code></pre>
</li>
<li>
<p>Save the <code>main.cpp</code> file and call <code>cmake --build .</code> to build the executable.</p>
</li>
</ol>
<h3 id="what-it-does">What it does</h3>
<p>When the <code>OnEndStep</code> function is called at the end of each simulation step, it calls the <a href="#dsveoscosim_receivecanmessage-function">DsVeosCoSim_ReceiveCanMessage Function</a> repeatedly until this function returns <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result_Empty</a>. For each received message, information on the message ID and the simulation time is printed.</p>
<h3 id="running-the-co-simulation">Running the co-simulation</h3>
<ol>
<li>
<p>Enable the generation of bus log files as described in <a href="#example-sending-data">Example: Sending Data</a>.</p>
</li>
<li>
<p>Load the <code>DsVeosCoSim.osa</code> you created in
<a href="#example-using-data-callback-functions-to-get-information-on-can-bus-messages">Example: Using Data Callback Functions to Get Information on CAN Bus Messages</a> to the VEOS
simulator.</p>
<p>VEOS displays a message to inform you that bus logging was enabled. In the VEOS Player, direct links to the files are displayed in the <strong>Messages</strong> pane.</p>
</li>
<li>
<p>From your <code>DsVeosCoSimDemo/build</code> directory, run the executable you built in <a href="#example-receiving-data">Example: Receiving Data</a> via</p>
<pre class="hljs"><code><div>.\Debug\DsVeosCoSimDemo.exe
</div></code></pre>
<p>on Windows or</p>
<pre class="hljs"><code><div>./Debug/DsVeosCoSimDemo
</div></code></pre>
<p>on Linux.</p>
</li>
<li>
<p>Start the simulation in VEOS:</p>
<ul>
<li>
<p>On Windows, click <strong>Simulation</strong> - <strong>Start</strong> in the VEOS Player or use the VEOS Simulator Console in the command-line:</p>
<pre class="hljs"><code><div>&lt;VEOS installation directory&gt;\bin\veos.exe sim start
</div></code></pre>
</li>
<li>
<p>On Linux:</p>
<pre class="hljs"><code><div>/opt/dspace/veos2023b/bin/veos sim start
</div></code></pre>
</li>
</ul>
</li>
</ol>
<h3 id="client-output-and-bus-log-files">Client output and bus log files</h3>
<p>The client output looks like this:</p>
<pre class="hljs"><code><div>Received CAN message with ID 10 at 0.002 s.
Received CAN message with ID 10 at 0.022 s.
Received CAN message with ID 10 at 0.042 s.
</div></code></pre>
<p>Compare this to the <code>CoSimExample.BusTransfer.log</code> file:</p>
<pre class="hljs"><code><div>Time,DeltaTime,ControllerID,MsgID,Dir,DataLen,Data,Type,DatabaseID
0000.0012,0000.0002,1,10,0,2,00-00,C,-1
0000.0212,0000.0002,1,10,0,2,00-00,C,-1
0000.0412,0000.0002,1,10,0,2,00-00,C,-1
</div></code></pre>
<h2 id="example-running-a-polling-based-simulation">Example: Running a Polling-Based Simulation</h2>
<h3 id="introduction">Introduction</h3>
<p>You can configure the CoSim client to operate in polling mode. In this case, the client continually polls for commands from VEOS and performs the actions that are specified for each command.</p>
<p>A polling-based co-simulation can be useful in cases where the CoSim server has to communicate with another API that is callback-based. This way, you do not have to take care of synchronizing all the callbacks.</p>
<h3 id="preconditions">Preconditions</h3>
<ul>
<li>
<p>You must have made the preparations described in <a href="#how-to-prepare-the-cosim-demo">How to Prepare the CoSim Demo</a>.</p>
</li>
<li>
<p>You must have created the basic CoSim client described in <a href="#example-setting-up-a-basic-co-simulation">Example: Setting Up a Basic Co-Simulation</a>.</p>
</li>
<li>
<p>You must have modified the <code>DsVeosCoSim.osa</code> as described in <a href="#example-using-data-callback-functions-to-get-information-on-can-bus-messages">Example: Using Data Callback Functions to Get Information on CAN Bus Messages</a>.</p>
</li>
</ul>
<h3 id="how-to-set-up-the-client">How to set up the client</h3>
<ol>
<li>
<p>In the <code>main.cpp</code> code of the basic example, add the following function definition:</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnCanMessage</span><span class="hljs-params">(DsVeosCoSim_SimulationTime simulationTime,
                  <span class="hljs-keyword">const</span> DsVeosCoSim_CanController* canController,
                  <span class="hljs-keyword">const</span> DsVeosCoSim_CanMessage* message,
                  <span class="hljs-keyword">void</span>* userData)</span> </span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Received CAN message with ID "</span> &lt;&lt; message-&gt;id &lt;&lt; <span class="hljs-string">" with data "</span>
              &lt;&lt; DataToString(message-&gt;data, message-&gt;length, <span class="hljs-string">'-'</span>) &lt;&lt; <span class="hljs-string">" from CAN controller "</span> 
              &lt;&lt; canController-&gt;name &lt;&lt;  <span class="hljs-string">" at "</span>
              &lt;&lt; DSVEOSCOSIM_SIMULATION_TIME_TO_SECONDS(simulationTime) &lt;&lt; <span class="hljs-string">" s.\n"</span>;
}
</div></code></pre>
</li>
<li>
<p>Change <code>Step 4</code> in the <code>main</code> function like this:</p>
<pre class="hljs"><code><div><span class="hljs-comment">// Step 4: Run a polling-based co-simulation</span>
DsVeosCoSim_Callbacks callbacks{};
callbacks.canMessageReceivedCallback = OnCanMessage;
callbacks.userData = handle; <span class="hljs-comment">// Pass the handle to every callback</span>
<span class="hljs-keyword">if</span> (DsVeosCoSim_StartPollingBasedCoSimulation(handle, callbacks) != DsVeosCoSim_Result_Ok) {
    DsVeosCoSim_Disconnect(handle);
    DsVeosCoSim_Destroy(handle);
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
}

<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    DsVeosCoSim_SimulationTime simulationTime{};
    DsVeosCoSim_Command command{};
    <span class="hljs-keyword">if</span> (DsVeosCoSim_PollCommand(handle, &amp;simulationTime, &amp;command) != DsVeosCoSim_Result_Ok) {
        DsVeosCoSim_Disconnect(handle);
        DsVeosCoSim_Destroy(handle);
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    }

    <span class="hljs-keyword">switch</span> (command) {
        <span class="hljs-keyword">case</span> DsVeosCoSim_Command_Step: {
            <span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span> data[<span class="hljs-number">1</span>]{<span class="hljs-number">42</span>};
            DsVeosCoSim_CanMessage canMessage{};
            canMessage.id = <span class="hljs-number">12</span>;
            canMessage.flags = DsVeosCoSim_CanMessageFlags_FlexibleDataRateFormat;
            canMessage.length = <span class="hljs-number">1</span>;
            canMessage.data = data;
            <span class="hljs-keyword">const</span> DsVeosCoSim_Result result = DsVeosCoSim_CanMessageTransmit(handle, &amp;canMessage);
            <span class="hljs-keyword">if</span> (result == DsVeosCoSim_Result_Full) {
                <span class="hljs-comment">// No more place in the internal buffer</span>
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (result != DsVeosCoSim_Result_Ok) {
                DsVeosCoSim_Disconnect(handle);
                DsVeosCoSim_Destroy(handle);
                <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
            }
            <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">case</span> DsVeosCoSim_Command_Start:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Simulation started at "</span> &lt;&lt; DSVEOSCOSIM_SIMULATION_TIME_TO_SECONDS(simulationTime) &lt;&lt; <span class="hljs-string">" s.\n"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DsVeosCoSim_Command_Stop:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Simulation stopped at "</span> &lt;&lt; DSVEOSCOSIM_SIMULATION_TIME_TO_SECONDS(simulationTime) &lt;&lt; <span class="hljs-string">" s.\n"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DsVeosCoSim_Command_Pause:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Simulation paused at "</span> &lt;&lt; DSVEOSCOSIM_SIMULATION_TIME_TO_SECONDS(simulationTime) &lt;&lt; <span class="hljs-string">" s.\n"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DsVeosCoSim_Command_Continue:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Simulation continued at "</span> &lt;&lt; DSVEOSCOSIM_SIMULATION_TIME_TO_SECONDS(simulationTime) &lt;&lt; <span class="hljs-string">" s.\n"</span>;
            <span class="hljs-keyword">break</span>;
    }

    <span class="hljs-keyword">if</span> (DsVeosCoSim_FinishCommand(handle) != DsVeosCoSim_Result_Ok) {
        DsVeosCoSim_Disconnect(handle);
        DsVeosCoSim_Destroy(handle);
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    }
}
</div></code></pre>
</li>
<li>
<p>Save the <code>main.cpp</code> file and call <code>cmake --build .</code> to build the executable.</p>
</li>
</ol>
<h3 id="what-it-does">What it does</h3>
<p>First, a callback function for CAN messages is defined. This is passed to the <code>DsVeosCoSim_StartPollingBasedCoSimulation</code> function that starts the polling-based co-simulation.</p>
<p>The simulation then proceeds according to the command that is passed via <a href="#dsveoscosim_pollcommand-function">DsVeosCoSim_PollCommand Function</a> and continues polling for commands and executing them until the simulation is unloaded or the <a href="#dsveoscosim_disconnect-function">DsVeosCoSim_Disconnect Function</a> is called.</p>
<p>Each time the Step command is received, a CAN message is sent as specified in the <code>DsVeosCoSim_Command_Step</code> case. This is identical to the CAN message specified in <a href="#example-sending-data">Example: Sending Data</a>.</p>
<h3 id="running-the-co-simulation">Running the co-simulation</h3>
<ol>
<li>
<p>Enable the generation of bus log files as described in <a href="#example-sending-data">Example: Sending Data</a>.</p>
</li>
<li>
<p>Load the <code>DsVeosCoSim.osa</code> you created in <a href="#example-using-data-callback-functions-to-get-information-on-can-bus-messages">Example: Using Data Callback Functions to Get Information on CAN Bus Messages</a> to the VEOS simulator.</p>
<p>VEOS displays a message to inform you that bus logging was enabled. In the VEOS Player, direct links to the files are displayed in the <strong>Messages</strong> pane.</p>
</li>
<li>
<p>From your <code>DsVeosCoSimDemo/build</code> directory, run the executable you built in <a href="#example-running-a-polling-based-simulation">Example: Running a Polling-Based Simulation</a> via</p>
<pre class="hljs"><code><div>.\Debug\DsVeosCoSimDemo.exe
</div></code></pre>
<p>on Windows or</p>
<pre class="hljs"><code><div>./Debug/DsVeosCoSimDemo
</div></code></pre>
<p>on Linux.</p>
</li>
<li>
<p>Start the simulation in VEOS:</p>
<ul>
<li>
<p>On Windows, click <strong>Simulation</strong> - <strong>Start</strong> in the VEOS Player or use the VEOS Simulator Console in the command-line:</p>
<pre class="hljs"><code><div>&lt;VEOS installation directory&gt;\bin\veos.exe sim start
</div></code></pre>
</li>
<li>
<p>On Linux:</p>
<pre class="hljs"><code><div>/opt/dspace/veos2023b/bin/veos sim start
</div></code></pre>
</li>
</ul>
</li>
</ol>
<h3 id="client-output-and-bus-log-files">Client output and bus log files</h3>
<p>The client produces the same output as in <a href="#example-implementing-simulation-state-change-callbacks">Example: Implementing Simulation State Change Callbacks</a>.</p>
<p>The bus log files correspond to the bus log files produced by <a href="#example-sending-data">Example: Sending Data</a>.</p>
<h2 id="example-handling-io-signals">Example: Handling I/O Signals</h2>
<h3 id="introduction">Introduction</h3>
<p>This example illustrates how to handle I/O signals in a co-simulation using a modification of
<a href="#example-running-a-polling-based-simulation">Example: Running a Polling-Based Simulation</a> and an additional CoSim server-client pair.</p>
<p>The polling-based co-simulation is modified to change the value of the outgoing signal at specified times when the simulation is advanced by a step. The second
client reads the signal from the first one and reports on each signal value change.</p>
<h3 id="preconditions">Preconditions</h3>
<ul>
<li>
<p>You must have made the preparations described in <a href="#how-to-prepare-the-cosim-demo">How to Prepare the CoSim Demo</a>.</p>
</li>
<li>
<p>You must have created the basic CoSim client described in <a href="#example-setting-up-a-basic-co-simulation">Example: Setting Up a Basic Co-Simulation</a>
and modified it as described in <a href="#example-running-a-polling-based-simulation">Example: Running a Polling-Based Simulation</a>.</p>
</li>
</ul>
<h3 id="how-to-modify-the-polling-based-client">How to modify the polling-based client</h3>
<ol>
<li>
<p>In the <code>main.cpp</code> of the polling-based client, add the following declaration:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">const</span> DsVeosCoSim_IoSignal* outgoingSignals{};
</div></code></pre>
</li>
<li>
<p>In the main function, change the DsVeosCoSim_Command_Step case like this:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">case</span> DsVeosCoSim_Command_Step: {
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Simulation stepped at "</span> &lt;&lt; DSVEOSCOSIM_SIMULATION_TIME_TO_SECONDS(simulationTime) &lt;&lt; <span class="hljs-string">" s.\n"</span>;
    <span class="hljs-keyword">if</span> ((simulationTime % <span class="hljs-number">10000000</span>) == <span class="hljs-number">0</span>) { <span class="hljs-comment">// Only every 10 milliseconds</span>
        <span class="hljs-keyword">double</span> value = DSVEOSCOSIM_SIMULATION_TIME_TO_SECONDS(simulationTime);
        <span class="hljs-keyword">if</span> (DsVeosCoSim_WriteOutgoingSignal(handle, outgoingSignals[<span class="hljs-number">0</span>].id, <span class="hljs-number">1</span>, &amp;value) != DsVeosCoSim_Result_Ok) {
            DsVeosCoSim_Disconnect(handle);
            DsVeosCoSim_Destroy(handle);
            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
        }
    }
}
</div></code></pre>
</li>
<li>
<p>Save the <code>main.cpp</code> file and call <code>cmake --build .</code> to build the executable.</p>
</li>
</ol>
<h3 id="what-it-does">What it does</h3>
<p>The modification of the polling-based co-simulation makes the client check at each step if the current simulation time is a multiple of 10 milliseconds. If yes,
it changes the value of the outgoing signal to the current simulation time in seconds.</p>
<h3 id="creating-the-second-cosim-client">Creating the second CoSim client</h3>
<ol>
<li>
<p>Create the <code>main2.cpp</code> file with the following content:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iomanip&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sstream&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"DsVeosCoSim/DsVeosCoSim.h"</span></span>

<span class="hljs-keyword">uint32_t</span> ioSignalsCount{};
<span class="hljs-keyword">const</span> DsVeosCoSim_IoSignal* ioSignals{};

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnLogCallback</span><span class="hljs-params">(DsVeosCoSim_Severity severity, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* logMessage)</span> </span>{
    <span class="hljs-keyword">switch</span> (severity) {
        <span class="hljs-keyword">case</span> DsVeosCoSim_Severity_Error:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"ERROR "</span> &lt;&lt; logMessage &lt;&lt; <span class="hljs-string">"\n"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DsVeosCoSim_Severity_Warning:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"WARN  "</span> &lt;&lt; logMessage &lt;&lt; <span class="hljs-string">"\n"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DsVeosCoSim_Severity_Info:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"INFO  "</span> &lt;&lt; logMessage &lt;&lt; <span class="hljs-string">"\n"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> DsVeosCoSim_Severity_Trace:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"TRACE "</span> &lt;&lt; logMessage &lt;&lt; <span class="hljs-string">"\n"</span>;
            <span class="hljs-keyword">break</span>;
    }
}

<span class="hljs-comment">// Called after every interval specified in the StepSize parameter of the CoSim JSON file</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnEndStep</span><span class="hljs-params">(DsVeosCoSim_SimulationTime simulationTime, <span class="hljs-keyword">void</span>* userData)</span> </span>{
    <span class="hljs-keyword">uint32_t</span> length{};
    <span class="hljs-keyword">double</span> value{};
    <span class="hljs-keyword">if</span> (DsVeosCoSim_ReadIncomingSignal(userData, ioSignals[<span class="hljs-number">0</span>].id, &amp;length, &amp;value) != DsVeosCoSim_Result_Ok) {
        DsVeosCoSim_Disconnect(userData);
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Signal has the value "</span> &lt;&lt; value &lt;&lt; <span class="hljs-string">" at "</span> &lt;&lt;
    DSVEOSCOSIM_SIMULATION_TIME_TO_SECONDS(simulationTime) &lt;&lt; <span class="hljs-string">" s.\n"</span>;
}

<span class="hljs-comment">// Called when an I/O signal has changed</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnSignal</span><span class="hljs-params">(DsVeosCoSim_SimulationTime simulationTime,
              <span class="hljs-keyword">const</span> DsVeosCoSim_IoSignal* ioSignal,
              <span class="hljs-keyword">uint32_t</span> length,
              <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* value,
              <span class="hljs-keyword">void</span>* userData)</span> </span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Signal changed to the value "</span> &lt;&lt; *(<span class="hljs-keyword">double</span>*)value &lt;&lt; <span class="hljs-string">" at "</span> &lt;&lt;
    DSVEOSCOSIM_SIMULATION_TIME_TO_SECONDS(simulationTime) &lt;&lt; <span class="hljs-string">" s.\n"</span>;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    DsVeosCoSim_SetLogCallback(OnLogCallback);

    DsVeosCoSim_Handle handle = DsVeosCoSim_Create();
    <span class="hljs-keyword">if</span> (handle == <span class="hljs-literal">nullptr</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    }

    DsVeosCoSim_ConnectConfig connectConfig{};
    connectConfig.serverName = <span class="hljs-string">"CoSimExample2"</span>;
    <span class="hljs-keyword">if</span> (DsVeosCoSim_Connect(handle, connectConfig) != DsVeosCoSim_Result_Ok) {
        DsVeosCoSim_Destroy(handle);
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    }

    <span class="hljs-keyword">if</span> (DsVeosCoSim_GetIncomingSignals(handle, &amp;ioSignalsCount, &amp;ioSignals) != DsVeosCoSim_Result_Ok) {
        DsVeosCoSim_Disconnect(handle);
        DsVeosCoSim_Destroy(handle);
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    }

    DsVeosCoSim_Callbacks callbacks{};
    callbacks.incomingSignalChangedCallback = OnSignal;
    callbacks.simulationEndStepCallback = OnEndStep;
    callbacks.userData = handle; <span class="hljs-comment">// Pass the handle to every callback</span>
    <span class="hljs-keyword">if</span> (DsVeosCoSim_RunCallbackBasedCoSimulation(handle, callbacks) != DsVeosCoSim_Result_Ok) {
        DsVeosCoSim_Disconnect(handle);
        DsVeosCoSim_Destroy(handle);
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    }

    DsVeosCoSim_Destroy(handle);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; 
}
</div></code></pre>
</li>
<li>
<p>Add the following lines to the <code>CMakeLists.txt</code> file and save it:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">add_executable</span>(Client2 main2.cpp)
<span class="hljs-keyword">target_link_libraries</span>(Client2 PRIVATE DsVeosCoSim)
</div></code></pre>
</li>
<li>
<p>In the <code>DsVeosCoSimDemo/build</code> directory, run the following commands again to configure the build project and build the executable:</p>
<pre class="hljs"><code><div>cmake ..
cmake --build .
</div></code></pre>
<p>There is now a second executable in the Debug subdirectory, e.g., <code>Client2.exe</code>.</p>
</li>
</ol>
<h3 id="what-it-does">What it does</h3>
<p>The second client performs a callback-based simulation in which the <code>OnSignal</code> function is called when the input signal changes. It then prints the new value
and the corresponding simulation time.</p>
<p>The <code>OnEndStep</code> function is called at the end of each simulation step. It reads the incoming signal that was received first and prints its value and the
corresponding simulation time.</p>
<h3 id="how-to-create-the-second-cosim-server">How to create the second CoSim server</h3>
<ol>
<li>
<p>Create a new JSON interface description file with the following content:</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"file:///DsVeosCoSim.schema.json"</span>,
  <span class="hljs-attr">"Type"</span>: <span class="hljs-string">"DsVeosCoSim"</span>,
  <span class="hljs-attr">"Name"</span>: <span class="hljs-string">"CoSimExample2"</span>,
  <span class="hljs-attr">"StepSize"</span>: <span class="hljs-number">0.001</span>,
  <span class="hljs-attr">"IOSignals"</span>: {
    <span class="hljs-attr">"Incoming"</span>: [
      {
        <span class="hljs-attr">"Name"</span>: <span class="hljs-string">"Signal1"</span>,
        <span class="hljs-attr">"DataType"</span>: <span class="hljs-string">"float64"</span>,
        <span class="hljs-attr">"PortName"</span>: <span class="hljs-string">"Port1"</span>
      }
    ]
  }
}
</div></code></pre>
</li>
<li>
<p>Save this file as <code>CoSimExample2.json</code> and import it into the <code>DsVeosCoSim.osa</code>.</p>
</li>
<li>
<p>Connect the <code>Signal1</code> signal of the <code>CoSimExample</code> server to the <code>Signal1</code> signal of the <code>CoSimExample2</code> server:</p>
<ul>
<li>
<p>On Windows:</p>
<ul>
<li>
<p>In the VEOS Player, click <strong>Home</strong> - <strong>Autoconnect</strong> - <strong>Autoconnect signals</strong>.</p>
</li>
<li>
<p>In the command-line, you have to use the VEOS Model Console like this:</p>
<pre class="hljs"><code><div>&lt;VEOS installation directory&gt;\bin\veos.exe model connect .\DsVeosCoSim.osa --autoconnect-signals
</div></code></pre>
</li>
</ul>
</li>
<li>
<p>On Linux:</p>
<pre class="hljs"><code><div>/opt/dspace/veos2023b/bin/veos model connect ./DsVeosCoSim.osa --autoconnect-signals
</div></code></pre>
</li>
</ul>
</li>
<li>
<p>Save the <code>DsVeosCoSim.osa</code>.</p>
</li>
</ol>
<h3 id="running-the-co-simulation">Running the co-simulation</h3>
<ol>
<li>
<p>Load the <code>DsVeosCoSim.osa</code> to the VEOS simulator.</p>
</li>
<li>
<p>From your <code>DsVeosCoSimDemo/build</code> directory, run each executable in a separate terminal:</p>
<pre class="hljs"><code><div>.\Debug\DsVeosCoSimDemo.exe
</div></code></pre>
<p>and</p>
<pre class="hljs"><code><div>.\Debug\Client2.exe
</div></code></pre>
<p>on Windows or</p>
<pre class="hljs"><code><div>./Debug/DsVeosCoSimDemo
</div></code></pre>
<p>and</p>
<pre class="hljs"><code><div>./Debug/Client2
</div></code></pre>
<p>on Linux.</p>
</li>
<li>
<p>Start the simulation in VEOS:</p>
<ul>
<li>
<p>On Windows, click <strong>Simulation</strong> - <strong>Start</strong> in the VEOS Player or use the VEOS Simulator Console in the command-line:</p>
<pre class="hljs"><code><div>&lt;VEOS installation directory&gt;\bin\veos.exe sim start
</div></code></pre>
</li>
<li>
<p>On Linux:</p>
<pre class="hljs"><code><div>/opt/dspace/veos2023b/bin/veos sim start
</div></code></pre>
</li>
</ul>
</li>
</ol>
<h3 id="client-output">Client output</h3>
<p>The output of the first client performing the polling-based simulation looks like this:</p>
<pre class="hljs"><code><div>Simulation stepped at 0 s.
Simulation stepped at 0.001 s.
Simulation stepped at 0.002 s.
Simulation stepped at 0.003 s.
Simulation stepped at 0.004 s.
Simulation stepped at 0.005 s.
Simulation stepped at 0.006 s.
Simulation stepped at 0.007 s.
Simulation stepped at 0.008 s.
Simulation stepped at 0.009 s.
Simulation stepped at 0.01 s.
Simulation stepped at 0.011 s.
Simulation stepped at 0.012 s.
Simulation stepped at 0.013 s.
Simulation stepped at 0.014 s.
Simulation stepped at 0.015 s.
Simulation stepped at 0.016 s.
Simulation stepped at 0.017 s.
Simulation stepped at 0.018 s.
Simulation stepped at 0.019 s.
Simulation stepped at 0.02 s.
Simulation stepped at 0.021 s.
</div></code></pre>
<p>The output of the second client performing the callback-based simulation looks like this:</p>
<pre class="hljs"><code><div>Signal has the value 0 at 0 s.
Signal has the value 0 at 0.001 s.
Signal has the value 0 at 0.002 s.
Signal has the value 0 at 0.003 s.
Signal has the value 0 at 0.004 s.
Signal has the value 0 at 0.005 s.
Signal has the value 0 at 0.006 s.
Signal has the value 0 at 0.007 s.
Signal has the value 0 at 0.008 s.
Signal has the value 0 at 0.009 s.
Signal has the value 0 at 0.01 s.
Signal changed to the value 0.01 at 0.011 s.
Signal has the value 0.01 at 0.011 s.
Signal has the value 0.01 at 0.012 s.
Signal has the value 0.01 at 0.013 s.
Signal has the value 0.01 at 0.014 s.
Signal has the value 0.01 at 0.015 s.
Signal has the value 0.01 at 0.016 s.
Signal has the value 0.01 at 0.017 s.
Signal has the value 0.01 at 0.018 s.
Signal has the value 0.01 at 0.019 s.
Signal has the value 0.01 at 0.02 s.
Signal changed to the value 0.02 at 0.021 s.
</div></code></pre>
<h2 id="example-optional-client">Example: Optional Client</h2>
<h3 id="introduction">Introduction</h3>
<p>By default, a co-simulation can only be started if a CoSim client is connected to a server in VEOS. However, by marking a client as optional in the JSON
interface description file of the CoSim server, the simulation can be started even when no client is connected.</p>
<h3 id="preconditions">Preconditions</h3>
<ul>
<li>
<p>You must have made the preparations described in <a href="#how-to-prepare-the-cosim-demo">How to Prepare the CoSim Demo</a>.</p>
</li>
<li>
<p>You must have created the basic CoSim client described in <a href="#example-setting-up-a-basic-co-simulation">Example: Setting Up a Basic Co-Simulation</a>.</p>
</li>
</ul>
<h3 id="modifying-the-cosim-server">Modifying the CoSim server</h3>
<ol>
<li>
<p>Add the following line at the top level of the <code>Example.json</code> file, for example, directly below the <code>StepSize</code> property, and save the file:</p>
<pre class="hljs"><code><div><span class="hljs-string">"IsClientOptional"</span>: <span class="hljs-literal">true</span>,
</div></code></pre>
</li>
<li>
<p>Remove the <code>CoSimExample</code> server from the <code>DsVeosCoSim.osa</code> and import the modified <code>Example.json</code>.</p>
</li>
</ol>
<h3 id="running-the-co-simulation">Running the co-simulation</h3>
<ol>
<li>
<p>Load the modified <code>DsVeosCoSim.osa</code> to the VEOS simulator.</p>
</li>
<li>
<p>Start the simulation in VEOS:</p>
<ul>
<li>
<p>On Windows, click <strong>Simulation</strong> - <strong>Start</strong> in the VEOS Player or use the VEOS Simulator Console in the command-line:</p>
<pre class="hljs"><code><div>&lt;VEOS installation directory&gt;\bin\veos.exe sim start
</div></code></pre>
</li>
<li>
<p>On Linux:</p>
<pre class="hljs"><code><div>/opt/dspace/veos2023b/bin/veos sim start
</div></code></pre>
</li>
</ul>
<p>Because the client is now marked as optional, the simulation starts even though no client is connected.</p>
</li>
<li>
<p>From the <code>DsVeosCoSimDemo/build</code> subdirectory, run the basic client executable via</p>
<pre class="hljs"><code><div>.\Debug\DsVeosCoSimDemo.exe
</div></code></pre>
<p>on Windows or</p>
<pre class="hljs"><code><div>./Debug/DsVeosCoSimDemo
</div></code></pre>
<p>on Linux.</p>
<p>Now the client connects to the server and participates in the co-simulation.</p>
</li>
<li>
<p>Terminate the client executable by pressing <code>Ctrl</code>+<code>C</code>.</p>
<p>The simulation continues without the client.</p>
</li>
</ol>
<h1 id="dsveoscosim-client-api-reference">DsVeosCoSim Client API Reference</h1>
<h2 id="enumerations">Enumerations</h2>
<h3 id="dsveoscosimcanmessageflags-enumeration">DsVeosCoSim_CanMessageFlags Enumeration</h3>
<h4 id="description">Description</h4>
<p>Contains the possible flags of a CAN message.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">uint32_t</span> DsVeosCoSim_CanMessageFlags;

<span class="hljs-keyword">enum</span> {
    DsVeosCoSim_CanMessageFlags_Loopback = <span class="hljs-number">1</span>,
    DsVeosCoSim_CanMessageFlags_Error = <span class="hljs-number">2</span>,
    DsVeosCoSim_CanMessageFlags_Drop = <span class="hljs-number">4</span>,
    DsVeosCoSim_CanMessageFlags_ExtendedId = <span class="hljs-number">8</span>,
    DsVeosCoSim_CanMessageFlags_BitRateSwitch = <span class="hljs-number">16</span>,
    DsVeosCoSim_CanMessageFlags_FlexibleDataRateFormat = <span class="hljs-number">32</span>,
};
</div></code></pre>
<h4 id="values">Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>DsVeosCoSim_CanMessageFlags_Loopback</td>
<td>For transmit and receive messages. Indicates that the CAN message is transmitted back to the sender as well.</td>
</tr>
<tr>
<td>DsVeosCoSim_CanMessageFlags_Error</td>
<td>Only for receive messages. Indicates that the CAN message transmission failed due to an error from the VEOS CoSim server.</td>
</tr>
<tr>
<td>DsVeosCoSim_CanMessageFlags_Drop</td>
<td>Only for receive messages. Indicates that the CAN message was dropped due to a full buffer at the VEOS CoSim server.</td>
</tr>
<tr>
<td>DsVeosCoSim_CanMessageFlags_ExtendedId</td>
<td>For transmit and receive messages. Indicates that the CAN message uses the extended ID range.</td>
</tr>
<tr>
<td>DsVeosCoSim_CanMessageFlags_BitRateSwitch</td>
<td>For transmit and receive messages. Indicates that the CAN message has a bit rate switch.</td>
</tr>
<tr>
<td>DsVeosCoSim_CanMessageFlags_FlexibleDataRateFormat</td>
<td>For transmit and receive messages. Indicates a CAN FD message.</td>
</tr>
</tbody>
</table>
<h3 id="dsveoscosimcommand-enumeration">DsVeosCoSim_Command Enumeration</h3>
<h4 id="description">Description</h4>
<p>Contains commands for controlling the co-simulation in polling mode.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> DsVeosCoSim_Command {
    DsVeosCoSim_Command_None,
    DsVeosCoSim_Command_Step,
    DsVeosCoSim_Command_Start,
    DsVeosCoSim_Command_Stop,
    DsVeosCoSim_Command_Terminate,
    DsVeosCoSim_Command_Pause,
    DsVeosCoSim_Command_Continue,
} DsVeosCoSim_Command;
</div></code></pre>
<h4 id="values">Values</h4>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>VeosCoSim_Command_None</td>
<td>No simulation command.</td>
</tr>
<tr>
<td>DsVeosCoSim_Command_Step</td>
<td>Advance the simulation by one step.</td>
</tr>
<tr>
<td>VeosCoSim_Command_Start</td>
<td>Start the simulation.</td>
</tr>
<tr>
<td>VeosCoSim_Command_Stop</td>
<td>Stop the simulation.</td>
</tr>
<tr>
<td>VeosCoSim_Command_Terminate</td>
<td>Terminate the simulation.</td>
</tr>
<tr>
<td>DsVeosCoSim_Command_Pause</td>
<td>Pause the simulation.</td>
</tr>
<tr>
<td>DsVeosCoSim_Command_Continue</td>
<td>Continue the simulation.</td>
</tr>
</tbody>
</table>
<h3 id="dsveoscosimconnectionstate-enumeration">DsVeosCoSim_ConnectionState Enumeration</h3>
<h4 id="description">Description</h4>
<p>Contains the possible connection states.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> DsVeosCoSim_ConnectionState {
    DsVeosCoSim_ConnectionState_Disconnected,
    DsVeosCoSim_ConnectionState_Connected,
} DsVeosCoSim_ConnectionState;
</div></code></pre>
<h4 id="values">Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>DsVeosCoSim_ConnectionState_Disconnected</td>
<td>Indicates that the VEOS CoSim client is disconnected from the server.</td>
</tr>
<tr>
<td>DsVeosCoSim_ConnectionState_Connected</td>
<td>Indicates that the VEOS CoSim client is connected to the server.</td>
</tr>
</tbody>
</table>
<h3 id="dsveoscosimdatatype-enumeration">DsVeosCoSim_DataType Enumeration</h3>
<h4 id="description">Description</h4>
<p>Contains valid data types for I/O signals.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> DsVeosCoSim_DataType {
    DsVeosCoSim_DataType_Bool = <span class="hljs-number">1</span>,
    DsVeosCoSim_DataType_Int8,
    DsVeosCoSim_DataType_Int16,
    DsVeosCoSim_DataType_Int32,
    DsVeosCoSim_DataType_Int64,
    DsVeosCoSim_DataType_UInt8,
    DsVeosCoSim_DataType_UInt16,
    DsVeosCoSim_DataType_UInt32,
    DsVeosCoSim_DataType_UInt64,
    DsVeosCoSim_DataType_Float32,
    DsVeosCoSim_DataType_Float64
} DsVeosCoSim_DataType;
</div></code></pre>
<h4 id="values">Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>DsVeosCoSim_DataType_Bool</td>
<td>The data type of the signal is Boolean. The C data type is uint8_t, where 0 equals false and any other value equals true.</td>
</tr>
<tr>
<td>DsVeosCoSim_DataType_Int8</td>
<td>The data type of the signal is signed 8-bit integer (int8_t).</td>
</tr>
<tr>
<td>DsVeosCoSim_DataType_Int16</td>
<td>The data type is signed 16-bit integer (int16_t).</td>
</tr>
<tr>
<td>DsVeosCoSim_DataType_Int32</td>
<td>The data type is signed 32-bit integer (int32_t).</td>
</tr>
<tr>
<td>DsVeosCoSim_DataType_Int64</td>
<td>The data type is signed 64-bit integer (int64_t).</td>
</tr>
<tr>
<td>DsVeosCoSim_DataType_UInt8</td>
<td>The data type is unsigned 8-bit integer (uint8_t).</td>
</tr>
<tr>
<td>DsVeosCoSim_DataType_UInt16</td>
<td>The data type is unsigned 16-bit integer (uint16_t).</td>
</tr>
<tr>
<td>DsVeosCoSim_DataType_UInt32</td>
<td>The data type is unsigned 32-bit integer (uint32_t).</td>
</tr>
<tr>
<td>DsVeosCoSim_DataType_UInt64</td>
<td>The data type is unsigned 64-bit integer (uint64_t).</td>
</tr>
<tr>
<td>DsVeosCoSim_DataType_Float32</td>
<td>The data type is 32-bit float (float).</td>
</tr>
<tr>
<td>DsVeosCoSim_DataType_Float64</td>
<td>The data type is 64-bit float (double).</td>
</tr>
</tbody>
</table>
<h3 id="dsveoscosimethmessageflags-enumeration">DsVeosCoSim_EthMessageFlags Enumeration</h3>
<h4 id="description">Description</h4>
<p>Contains the possible flags of an Ethernet message.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">uint32_t</span> DsVeosCoSim_EthMessageFlags;

<span class="hljs-keyword">enum</span> {
    DsVeosCoSim_EthMessageFlags_Loopback = <span class="hljs-number">1</span>,
    DsVeosCoSim_EthMessageFlags_Error = <span class="hljs-number">2</span>,
    DsVeosCoSim_EthMessageFlags_Drop = <span class="hljs-number">4</span>,
};
</div></code></pre>
<h4 id="values">Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>DsVeosCoSim_EthMessageFlags_Loopback</td>
<td>For transmit and receive messages. Indicates that the Ethernet message is transmitted back to the sender as well.</td>
</tr>
<tr>
<td>DsVeosCoSim_EthMessageFlags_Error</td>
<td>Only for receive messages. Indicates that the Ethernet message transmission failed due to an error from the VEOS CoSim server.</td>
</tr>
<tr>
<td>DsVeosCoSim_EthMessageFlags_Drop</td>
<td>Only for receive messages. Indicates that the Ethernet message was dropped due to a full buffer at the VEOS CoSim server.</td>
</tr>
</tbody>
</table>
<h3 id="dsveoscosimlincontrollertype-enumeration">DsVeosCoSim_LinControllerType Enumeration</h3>
<h4 id="description">Description</h4>
<p>Contains the LIN controller type.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> DsVeosCoSim_LinControllerType {
    DsVeosCoSim_LinControllerType_Responder = <span class="hljs-number">1</span>,
    DsVeosCoSim_LinControllerType_Commander,
} DsVeosCoSim_LinControllerType;
</div></code></pre>
<h4 id="values">Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>DsVeosCoSim_LinControllerType_Responder</td>
<td>Indicates that the LIN controller is a responder, i.e., slave.</td>
</tr>
<tr>
<td>DsVeosCoSim_LinControllerType_Commander</td>
<td>Indicates that the LIN controller is a commander, i.e,. master.</td>
</tr>
</tbody>
</table>
<h3 id="dsveoscosimlinmessageflags-enumeration">DsVeosCoSim_LinMessageFlags Enumeration</h3>
<h4 id="description">Description</h4>
<p>Contains the possible flags of a LIN message.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">uint32_t</span> DsVeosCoSim_LinMessageFlags;

<span class="hljs-keyword">enum</span> {
    DsVeosCoSim_LinMessageFlags_Loopback = <span class="hljs-number">1</span>,
    DsVeosCoSim_LinMessageFlags_Error = <span class="hljs-number">2</span>,
    DsVeosCoSim_LinMessageFlags_Drop = <span class="hljs-number">4</span>,
    DsVeosCoSim_LinMessageFlags_Header = <span class="hljs-number">8</span>,
    DsVeosCoSim_LinMessageFlags_Response = <span class="hljs-number">16</span>,
    DsVeosCoSim_LinMessageFlags_WakeEvent = <span class="hljs-number">32</span>,
    DsVeosCoSim_LinMessageFlags_SleepEvent = <span class="hljs-number">64</span>,
    DsVeosCoSim_LinMessageFlags_EnhancedChecksum = <span class="hljs-number">128</span>,
    DsVeosCoSim_LinMessageFlags_TransferOnce = <span class="hljs-number">256</span>,
    DsVeosCoSim_LinMessageFlags_ParityFailure = <span class="hljs-number">512</span>,
    DsVeosCoSim_LinMessageFlags_Collision = <span class="hljs-number">1024</span>,
    DsVeosCoSim_LinMessageFlags_NoResponse = <span class="hljs-number">2048</span>,
};
</div></code></pre>
<h4 id="values">Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>DsVeosCoSim_LinMessageFlags_Loopback</td>
<td>For transmit and receive messages. Indicates that the LIN message is transmitted back to the sender as well.</td>
</tr>
<tr>
<td>DsVeosCoSim_LinMessageFlags_Error</td>
<td>Only for receive messages. Indicates that the LIN message transmission failed due to an error from the VEOS CoSim server.</td>
</tr>
<tr>
<td>DsVeosCoSim_LinMessageFlags_Drop</td>
<td>Only for receive messages. Indicates that the LIN message was dropped due to a full buffer at the VEOS CoSim server.</td>
</tr>
<tr>
<td>DsVeosCoSim_LinMessageFlags_Header</td>
<td>For transmit and receive messages. Indicates that the LIN message contains a header.</td>
</tr>
<tr>
<td>DsVeosCoSim_LinMessageFlags_Response</td>
<td>For transmit and receive messages. Indicates that the LIN message contains a response.</td>
</tr>
<tr>
<td>DsVeosCoSim_LinMessageFlags_WakeEvent</td>
<td>For transmit and receive messages. Indicates that the LIN message contains a wake command.</td>
</tr>
<tr>
<td>DsVeosCoSim_LinMessageFlags_SleepEvent</td>
<td>For transmit and receive messages. Indicates that the LIN message contains a sleep command.</td>
</tr>
<tr>
<td>DsVeosCoSim_LinMessageFlags_EnhancedChecksum</td>
<td>For transmit and receive messages. Indicates that the LIN message uses the enhanced checksum.</td>
</tr>
<tr>
<td>DsVeosCoSim_LinMessageFlags_TransferOnce</td>
<td>Only for transmit messages. This flag only makes sense if the DsVeosCoSim_LinMessageFlags_Response flag is set. Indicates a single ad-hoc transmission of a LIN response message. If the message is not in the allowed response space it will be omitted silently.</td>
</tr>
<tr>
<td>DsVeosCoSim_LinMessageFlags_ParityFailure</td>
<td>Only for receive messages. Indicates that the LIN header could not be transmitted, because another LIN header was sent at the same time.</td>
</tr>
<tr>
<td>DsVeosCoSim_LinMessageFlags_Collision</td>
<td>Only for receive messages. Indicates that the LIN response could not be transmitted, because another LIN response was sent at the same time.</td>
</tr>
<tr>
<td>DsVeosCoSim_LinMessageFlags_NoResponse</td>
<td>Only for receive messages. Indicates that no response to the last header was received.</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong></p>
<ul>
<li>
<p>One of the following flags must be set:</p>
<ul>
<li>DsVeosCoSim_LinMessageFlags_Header</li>
<li>DsVeosCoSim_LinMessageFlags_Response</li>
<li>DsVeosCoSim_LinMessageFlags_WakeEvent</li>
<li>DsVeosCoSim_LinMessageFlags_SleepEvent</li>
</ul>
</li>
<li>
<p>If DsVeosCoSim_LinMessageFlags_Header and DsVeosCoSim_LinMessageFlags_Response are set simultaneously, the message contains both header and response.</p>
</li>
<li>
<p>DsVeosCoSim_LinMessageFlags_WakeEvent and DsVeosCoSim_LinMessageFlags_SleepEvent cannot be combined with each other or with DsVeosCoSim_LinMessageFlags_Header and DsVeosCoSim_LinMessageFlags_Response</p>
</li>
</ul>
<h3 id="dsveoscosimresult-enumeration">DsVeosCoSim_Result Enumeration</h3>
<h4 id="description">Description</h4>
<p>Contains the possible return values of VEOS CoSim functions.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> DsVeosCoSim_Result {
    DsVeosCoSim_Result_Ok,
    DsVeosCoSim_Result_Error,
    DsVeosCoSim_Result_Empty,
    DsVeosCoSim_Result_Full
    DsVeosCoSim_Result_InvalidArgument,
    DsVeosCoSim_Result_Disconnected
} DsVeosCoSim_Result;
</div></code></pre>
<h4 id="values">Values</h4>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>DsVeosCoSim_Result_Ok</td>
<td>The function call was successful.</td>
</tr>
<tr>
<td>DsVeosCoSim_Result_Error</td>
<td>The function call failed with an error. In this case, a log message is sent via the DsVeosCoSim_LogCallback function. Refer to <a href="#dsveoscosim_logcallback-function-pointer">DsVeosCoSim_LogCallback Function Pointer</a>.</td>
</tr>
<tr>
<td>DsVeosCoSim_Result_Empty</td>
<td>Only for bus message receive functions. Indicates that no bus message was found in the internal buffer.</td>
</tr>
<tr>
<td>DsVeosCoSim_Result_Full</td>
<td>Only for bus message transmit functions. Indicates that no space is left for new bus messages in the internal buffer.</td>
</tr>
<tr>
<td>DsVeosCoSim_Result_InvalidArgument</td>
<td>The function call failed due to an invalid argument.</td>
</tr>
<tr>
<td>DsVeosCoSim_Result_Disconnected</td>
<td>The function detected a disconnection from the VEOS CoSim server.</td>
</tr>
</tbody>
</table>
<h3 id="dsveoscosimseverity-enumeration">DsVeosCoSim_Severity Enumeration</h3>
<h4 id="description">Description</h4>
<p>Contains all possible severity levels of a log message in descending order of severity.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> DsVeosCoSim_Severity {
    DsVeosCoSim_Severity_Error
    DsVeosCoSim_Severity_Warning,
    DsVeosCoSim_Severity_Info,
    DsVeosCoSim_Severity_Trace,
} DsVeosCoSim_Severity;
</div></code></pre>
<h4 id="values">Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>DsVeosCoSim_Severity_Error</td>
<td>The severity level is error.</td>
</tr>
<tr>
<td>DsVeosCoSim_Severity_Warning</td>
<td>The severity level is warning.</td>
</tr>
<tr>
<td>DsVeosCoSim_Severity_Info</td>
<td>The severity level is information.</td>
</tr>
<tr>
<td>DsVeosCoSim_Severity_Trace</td>
<td>The severity level is trace.</td>
</tr>
</tbody>
</table>
<h3 id="dsveoscosimsizekind-enumeration">DsVeosCoSim_SizeKind Enumeration</h3>
<h4 id="description">Description</h4>
<p>Contains information on the I/O signal length type.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> DsVeosCoSim_SizeKind {
    DsVeosCoSim_SizeKind_Fixed = <span class="hljs-number">1</span>,
    DsVeosCoSim_SizeKind_Variable,
} DsVeosCoSim_SizeKind;
</div></code></pre>
<h4 id="values">Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>DsVeosCoSim_SizeKind_Fixed</td>
<td>Indicates that the I/O signal has a fixed length.</td>
</tr>
<tr>
<td>DsVeosCoSim_SizeKind_Variable</td>
<td>Indicates that the I/O signal has a variable length in the range of 0 to <a href="#dsveoscosim_iosignal-structure">DsVeosCoSim_IoSignal.length</a>.</td>
</tr>
</tbody>
</table>
<h3 id="dsveoscosimterminatereason-enumeration">DsVeosCoSim_TerminateReason Enumeration</h3>
<h4 id="description">Description</h4>
<p>Contains the possible reasons for a termination of the co-simulation.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> DsVeosCoSim_TerminateReason {
    DsVeosCoSim_TerminateReason_Finished,
    DsVeosCoSim_TerminateReason_Error,
} DsVeosCoSim_TerminateReason;
</div></code></pre>
<h4 id="values">Values</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>DsVeosCoSim_TerminateReason_Finished</td>
<td>Indicates that the co-simulation was terminated because it finished successfully.</td>
</tr>
<tr>
<td>DsVeosCoSim_TerminateReason_Error</td>
<td>Indicates that the co-simulation was terminated because of an error.</td>
</tr>
</tbody>
</table>
<h2 id="functions">Functions</h2>
<h3 id="dsveoscosimcanmessagereceivedcallback-function-pointer">DsVeosCoSim_CanMessageReceivedCallback Function Pointer</h3>
<h4 id="description">Description</h4>
<p>Called when a new CAN message is received from the VEOS CoSim server.</p>
<p><strong>Note:</strong>
If <code>DsVeosCoSim_CanMessageReceivedCallback</code> is registered, you cannot collect CAN messages using the
<a href="#dsveoscosim_receivecanmessage-function">DsVeosCoSim_ReceiveCanMessage Function</a>.</p>
<p>However, if the callback is not registered, each received message is buffered. Currently, the buffer size is 512 messages. If the buffer is full, new messages
are discarded.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-title">void</span> <span class="hljs-params">(*DsVeosCoSim_CanMessageReceivedCallback)</span><span class="hljs-params">(
    DsVeosCoSim_SimulationTime simulationTime,
    <span class="hljs-keyword">const</span> DsVeosCoSim_CanController* busController,
    <span class="hljs-keyword">const</span> DsVeosCoSim_CanMessage* message,
    <span class="hljs-keyword">void</span>* userData
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>simulationTime</td>
<td>The current simulation time. Refer to <a href="#dsveoscosim_simulationtime-type">DsVeosCoSim_SimulationTime Type</a>.</td>
</tr>
<tr>
<td>canController</td>
<td>The CAN controller that sent the message. Refer to <a href="#dsveoscosim_cancontroller-structure">DsVeosCoSim_CanController Structure</a>.</td>
</tr>
<tr>
<td>message</td>
<td>A pointer to the received CAN message. Refer to <a href="#dsveoscosim_canmessage-structure">DsVeosCoSim_CanMessage Structure</a>.</td>
</tr>
<tr>
<td>userData</td>
<td>The user data passed to the co-simulation function via the <a href="#dsveoscosim_setcallbacks-function">DsVeosCoSim_SetCallbacks Function</a>. Can be NULL.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>This function has no return values.</p>
<h3 id="dsveoscosimconnect-function">DsVeosCoSim_Connect Function</h3>
<h4 id="description">Description</h4>
<p>Connects the dSPACE VEOS CoSim client to the dSPACE VEOS CoSim server.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_Connect</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle,
    DsVeosCoSim_ConnectConfig connectConfig
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
<tr>
<td>connectConfig</td>
<td>The data used for connecting to the dSPACE VEOS CoSim sever. Refer to <a href="#dsveoscosim_connectconfig-structure">DsVeosCoSim_ConnectConfig Structure</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h3 id="dsveoscosimdestroy-function">DsVeosCoSim_Destroy Function</h3>
<h4 id="description">Description</h4>
<p>Destroys the given handle.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL <span class="hljs-keyword">void</span> <span class="hljs-title">DsVeosCoSim_Destroy</span><span class="hljs-params">(DsVeosCoSim_Handle handle)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>This function has no return values.</p>
<h3 id="dsveoscosimdisconnect-function">DsVeosCoSim_Disconnect Function</h3>
<h4 id="description">Description</h4>
<p>Disconnects the VEOS CoSim client from the VEOS CoSim server.</p>
<p>If there is no connection to the VEOS CoSim server, the <code>DsVeosCoSim_Disconnect</code> function does not do or return anything.</p>
<p>If the connection is closed during a running simulation, the simulation terminates with an error.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_Disconnect</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h3 id="dsveoscosimethmessagereceivedcallback-function-pointer">DsVeosCoSim_EthMessageReceivedCallback Function Pointer</h3>
<h4 id="description">Description</h4>
<p>Called when a new Ethernet message is received from the VEOS CoSim server.</p>
<p><code>VeosCoSim_EthMessageReceivedCallback</code> can be registered with the <a href="#dsveoscosim_setcallbacks-function">DsVeosCoSim_SetCallbacks Function</a>.</p>
<p><strong>Note:</strong>
If the <code>DsVeosCoSim_EthMessageReceivedCallback</code> is registered, you cannot collect Ethernet messages using the
<a href="#dsveoscosim_receiveethmessage-function">DsVeosCoSim_ReceiveEthMessage Function</a>.</p>
<p>However, if the callback is not registered, each received message is buffered. Currently, the buffer size is 512 messages. If the buffer is full, new messages
are discarded.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-title">void</span> <span class="hljs-params">(*DsVeosCoSim_EthMessageReceivedCallback)</span><span class="hljs-params">(
    DsVeosCoSim_SimulationTime simulationTime,
    <span class="hljs-keyword">const</span> DsVeosCoSim_EthController* ethController,
    <span class="hljs-keyword">const</span> DsVeosCoSim_EthMessage* message,
    <span class="hljs-keyword">void</span>* userData
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>simulationTime</td>
<td>The current simulation time. Refer to <a href="#dsveoscosim_simulationtime-type">DsVeosCoSim_SimulationTime Type</a>.</td>
</tr>
<tr>
<td>ethController</td>
<td>The Ethernet controller that sent the message. Refer to <a href="#dsveoscosim_ethcontroller-structure">DsVeosCoSim_EthController Structure</a>.</td>
</tr>
<tr>
<td>message</td>
<td>A pointer to the received Ethernet message. Refer to <a href="#dsveoscosim_ethmessage-structure">DsVeosCoSim_EthMessage Structure</a>.</td>
</tr>
<tr>
<td>userData</td>
<td>The user data passed to the co-simulation function via the <a href="#dsveoscosim_setcallbacks-function">DsVeosCoSim_SetCallbacks Function</a>. Can be NULL.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>This function has no return values.</p>
<h3 id="dsveoscosimfinishcommand-function">DsVeosCoSim_FinishCommand Function</h3>
<h4 id="description">Description</h4>
<p>Can be used to ensure that a command in a polling-based simulation has finished.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_FinishCommand</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h3 id="dsveoscosimgetcancontrollers-function">DsVeosCoSim_GetCanControllers Function</h3>
<h4 id="description">Description</h4>
<p>Gets all available CAN controllers in the co-simulation.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_GetCanControllers</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle,
    <span class="hljs-keyword">uint32_t</span>* canControllersCount,
    <span class="hljs-keyword">const</span> DsVeosCoSim_CanController** canControllers
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
<tr>
<td>canControllersCount</td>
<td>A pointer to the counter of CAN controllers.</td>
</tr>
<tr>
<td>canControllers</td>
<td>A pointer to the array of CAN controllers. Refer to <a href="#dsveoscosim_cancontroller-structure">DsVeosCoSim_CanController Structure</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h3 id="dsveoscosimgetconnectionstate-function">DsVeosCoSim_GetConnectionState Function</h3>
<h4 id="description">Description</h4>
<p>Gets the connection state for a given client handle.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_GetConnectionState</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle, 
    DsVeosCoSim_ConnectionState* connectionState
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
<tr>
<td>connectionState</td>
<td>The connection state. Refer to <a href="#dsveoscosim_connectionstate-enumeration">DsVeosCoSim_ConnectionState Enumeration</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h3 id="dsveoscosimgetethcontrollers-function">DsVeosCoSim_GetEthControllers Function</h3>
<h4 id="description">Description</h4>
<p>Gets all available Ethernet controllers in the co-simulation.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_GetEthControllers</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle,
    <span class="hljs-keyword">uint32_t</span>* ethControllersCount,
    <span class="hljs-keyword">const</span> DsVeosCoSim_EthController** ethControllers
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
<tr>
<td>ethControllersCount</td>
<td>A pointer to the counter of Ethernet controllers.</td>
</tr>
<tr>
<td>ethControllers</td>
<td>A pointer to the array of Ethernet controllers. Refer to <a href="#dsveoscosim_ethcontroller-structure">DsVeosCoSim_EthController Structure</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h3 id="dsveoscosimgetincomingsignals-function">DsVeosCoSim_GetIncomingSignals Function</h3>
<h4 id="description">Description</h4>
<p>Gets all available incoming signals.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_GetIncomingSignals</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle,
    <span class="hljs-keyword">uint32_t</span>* incomingSignalsCount,
    <span class="hljs-keyword">const</span> DsVeosCoSim_IoSignal** incomingSignals
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
<tr>
<td>incomingSignalsCount</td>
<td>A pointer to the counter of incoming signals.</td>
</tr>
<tr>
<td>incomingSignals</td>
<td>A pointer to the array of incoming signals. Refer to <a href="#dsveoscosim_iosignal-structure">DsVeosCoSim_IoSignal Structure</a></td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h3 id="dsveoscosimgetlincontrollers-function">DsVeosCoSim_GetLinControllers Function</h3>
<h4 id="description">Description</h4>
<p>Gets all available LIN controllers in the co-simulation.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_GetLinControllers</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle,
    <span class="hljs-keyword">uint32_t</span>* linControllersCount,
    <span class="hljs-keyword">const</span> DsVeosCoSim_LinController** linControllers
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
<tr>
<td>linControllersCount</td>
<td>A pointer to the counter of LIN controllers.</td>
</tr>
<tr>
<td>linControllers</td>
<td>A pointer to the array of LIN controllers. Refer to <a href="#dsveoscosim_lincontroller-structure">DsVeosCoSim_LinController Structure</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h3 id="dsveoscosimgetoutgoingsignals-function">DsVeosCoSim_GetOutgoingSignals Function</h3>
<h4 id="description">Description</h4>
<p>Gets all available outgoing signals.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_GetOutgoingSignals</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle,
    <span class="hljs-keyword">uint32_t</span>* outgoingSignalsCount,
    <span class="hljs-keyword">const</span> DsVeosCoSim_IoSignal** outgoingSignals
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
<tr>
<td>outgoingSignalsCount</td>
<td>A pointer to the counter of outgoing signals.</td>
</tr>
<tr>
<td>outgoingSignals</td>
<td>A pointer to the array of outgoing signals. Refer to <a href="#dsveoscosim_iosignal-structure">DsVeosCoSim_IoSignal Structure</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h3 id="dsveoscosimincomingsignalchangedcallback-function-pointer">DsVeosCoSim_IncomingSignalChangedCallback Function Pointer</h3>
<h4 id="description">Description</h4>
<p>Called when the value of an incoming I/O signal has changed.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-title">void</span> <span class="hljs-params">(*DsVeosCoSim_IncomingSignalChangedCallback)</span><span class="hljs-params">(
    DsVeosCoSim_SimulationTime simulationTime,
    <span class="hljs-keyword">const</span> DsVeosCoSim_IoSignal* ioSignal,
    <span class="hljs-keyword">uint32_t</span> length,
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* value,
    <span class="hljs-keyword">void</span>* userData
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>simulationTime</td>
<td>The current simulation time. Refer to <a href="#dsveoscosim_simulationtime-type">DsVeosCoSim_SimulationTime Type</a>.</td>
</tr>
<tr>
<td>ioSignal</td>
<td>The ID of the I/O signal that changed its value. Refer to <a href="#dsveoscosim_iosignalid-type">DsVeosCoSim_IoSignalId Type</a>.</td>
</tr>
<tr>
<td>value</td>
<td>A pointer to the current value of the I/O signal.</td>
</tr>
<tr>
<td>userData</td>
<td>The user data passed via the DsVeosCoSim_SetCallbacks function. Refer to <a href="#dsveoscosim_setcallbacks-function">DsVeosCoSim_SetCallbacks Function</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>This function has no return values.</p>
<h3 id="dsveoscosimlinmessagereceivedcallback-function-pointer">DsVeosCoSim_LinMessageReceivedCallback Function Pointer</h3>
<h4 id="description">Description</h4>
<p>Called when a new LIN message is received from the VEOS CoSim server.</p>
<p><code>DsVeosCoSim_LinMessageReceivedCallback</code> can be registered with <a href="#dsveoscosim_setcallbacks-function">DsVeosCoSim_SetCallbacks Function</a>.</p>
<p><strong>Note:</strong>
If <code>DsVeosCoSim_LinMessageReceivedCallback</code> is registered, you cannot collect LIN messages using <a href="#dsveoscosim_receivelinmessage-function">DsVeosCoSim_ReceiveLinMessage Function</a>.</p>
<p>However, if the callback is not registered, each received message is buffered. Currently, the buffer size is 512 messages. If the buffer is full, new messages
are discarded.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-title">void</span> <span class="hljs-params">(*DsVeosCoSim_LinMessageReceivedCallback)</span><span class="hljs-params">(
    DsVeosCoSim_SimulationTime simulationTime,
    <span class="hljs-keyword">const</span> DsVeosCoSim_LinController* linController,
    <span class="hljs-keyword">const</span> DsVeosCoSim_LinMessage* message,
    <span class="hljs-keyword">void</span>* userData
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>simulationTime</td>
<td>The current simulation time. Refer to <a href="#dsveoscosim_simulationtime-type">DsVeosCoSim_SimulationTime Type</a>.</td>
</tr>
<tr>
<td>linController</td>
<td>The LIN controller transmitting the message. Refer to <a href="#dsveoscosim_lincontroller-structure">DsVeosCoSim_LinController Structure</a>.</td>
</tr>
<tr>
<td>message</td>
<td>A pointer to the received LIN message. Refer to <a href="#dsveoscosim_linmessage-structure">DsVeosCoSim_LinMessage Structure</a>.</td>
</tr>
<tr>
<td>userData</td>
<td>The user data passed to the co-simulation function via the <a href="#dsveoscosim_setcallbacks-function">DsVeosCoSim_SetCallbacks Function</a>. Can be NULL.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>This function has no return values.</p>
<h3 id="dsveoscosimlogcallback-function-pointer">DsVeosCoSim_LogCallback Function Pointer</h3>
<h4 id="description">Description</h4>
<p>Called each time the dSPACE VEOS CoSim client receives a log message.</p>
<p>You can register the <code>DsVeosCoSim_LogCallback</code> function pointer using the <a href="#dsveoscosim_setlogcallback-function">DsVeosCoSim_SetLogCallback Function</a>.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-title">void</span> <span class="hljs-params">(*DsVeosCoSim_LogCallback)</span><span class="hljs-params">(
    DsVeosCoSim_Severity severity,
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* logMessage
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>severity</td>
<td>The severity of the message. Refer to <a href="#dsveoscosim_severity-enumeration">DsVeosCoSim_Severity Enumeration</a>.</td>
</tr>
<tr>
<td>logMessage</td>
<td>The log message content.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>This function has no return values.</p>
<h3 id="dsveoscosimpollcommand-function">DsVeosCoSim_PollCommand Function</h3>
<h4 id="description">Description</h4>
<p>Polls the simulator for a command.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_PollCommand</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle,
    DsVeosCoSim_SimulationTime* simulationTime,
    DsVeosCoSim_Command* command
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
<tr>
<td>simulationTime</td>
<td>The current simulation time. Refer to <a href="#dsveoscosim_simulationtime-type">DsVeosCoSim_SimulationTime Type</a>.</td>
</tr>
<tr>
<td>command</td>
<td>The received command. Refer to <a href="#dsveoscosim_command-enumeration">DsVeosCoSim_Command Enumeration</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h3 id="dsveoscosimreadincomingsignal-function">DsVeosCoSim_ReadIncomingSignal Function</h3>
<h4 id="description">Description</h4>
<p>Reads a value from an incoming signal of the VEOS CoSim server identified by the given handle.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_ReadIncomingSignal</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle,
    DsVeosCoSim_IoSignalId incomingSignalId,
    <span class="hljs-keyword">uint32_t</span>* length,
    <span class="hljs-keyword">void</span>* value
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
<tr>
<td>incomingSignalId</td>
<td>The ID of the incoming signal. Refer to <a href="#dsveoscosim_iosignalid-type">DsVeosCoSim_IoSignalId Type</a>.</td>
</tr>
<tr>
<td>length</td>
<td>The length of the incoming signal value.</td>
</tr>
<tr>
<td>value</td>
<td>The value of the incoming signal.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h3 id="dsveoscosimreceivecanmessage-function">DsVeosCoSim_ReceiveCanMessage Function</h3>
<h4 id="description">Description</h4>
<p>Receives a CAN message from the VEOS CoSim server.</p>
<p><strong>Note:</strong>
If the <a href="#dsveoscosim_canmessagereceivedcallback-function-pointer">DsVeosCoSim_CanMessageReceivedCallback Function Pointer</a> is registered, you cannot collect CAN messages using
the <code>DsVeosCoSim_ReceiveCanMessage</code> function.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_ReceiveCanMessage</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle,
    DsVeosCoSim_CanMessage* message
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
<tr>
<td>message</td>
<td>A pointer to the received CAN message. Refer to <a href="#dsveoscosim_canmessage-structure">DsVeosCoSim_CanMessage Structure</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h3 id="dsveoscosimreceiveethmessage-function">DsVeosCoSim_ReceiveEthMessage Function</h3>
<h4 id="description">Description</h4>
<p>Receives an Ethernet message from the VEOS CoSim server.</p>
<p><strong>Note:</strong>
If the [DsVeosCoSim_EthMessageReceivedCallback Function Pointer](#dsveoscosim_ethmessagereceivedcallback-function pointer) is registered, you cannot collect Ethernet messages
using the <code>DsVeosCoSim_ReceiveEthMessage</code> function.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_ReceiveEthMessage</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle,
    DsVeosCoSim_EthMessage* message
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
<tr>
<td>message</td>
<td>A pointer to the Ethernet message. Refer to <a href="#dsveoscosim_ethmessage-structure">DsVeosCoSim_EthMessage Structure</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h3 id="dsveoscosimreceivelinmessage-function">DsVeosCoSim_ReceiveLinMessage Function</h3>
<h4 id="description">Description</h4>
<p>Receives a LIN message from the VEOS CoSim server.</p>
<p><strong>Note:</strong>
If the <a href="#dsveoscosim_linmessagereceivedcallback-function-pointer">DsVeosCoSim_LinMessageReceivedCallback Function Pointer</a> is registered, you cannot collect LIN messages using
the <code>DsVeosCoSim_ReceiveLinMessage</code> function.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_ReceiveLinMessage</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle,
    DsVeosCoSim_LinMessage* message
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
<tr>
<td>message</td>
<td>A pointer to the LIN message. Refer to <a href="#dsveoscosim_linmessage-structure">DsVeosCoSim_LinMessage Structure</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h3 id="dsveoscosimruncallbackbasedcosimulation-function">DsVeosCoSim_RunCallbackBasedCoSimulation Function</h3>
<h4 id="description">Description</h4>
<p>Starts a callback-based co-simulation.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_RunCallbackBasedCoSimulation</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle,
    DsVeosCoSim_Callbacks callbacks
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
<tr>
<td>callbacks</td>
<td>The callbacks to be set. Refer to <a href="#dsveoscosim_callbacks-structure">DsVeosCoSim_Callbacks Structure</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h3 id="dsveoscosimsetcallbacks-function">DsVeosCoSim_SetCallbacks Function</h3>
<h4 id="description">Description</h4>
<p>Sets the callbacks for the VEOS CoSim client specified via the handle.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_SetCallbacks</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle,
    DsVeosCoSim_Callbacks callbacks
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
<tr>
<td>callbacks</td>
<td>The callbacks to be set. Refer to <a href="#dsveoscosim_callbacks-structure">DsVeosCoSim_Callbacks Structure</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h3 id="dsveoscosimsetlogcallback-function">DsVeosCoSim_SetLogCallback Function</h3>
<h4 id="description">Description</h4>
<p>Specifies the log callback function.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL <span class="hljs-keyword">void</span> <span class="hljs-title">DsVeosCoSim_SetLogCallback</span><span class="hljs-params">(
    DsVeosCoSim_LogCallback logCallback
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>logCallback</td>
<td>The log callback to which log messages will be sent. Refer to <a href="#dsveoscosim_logcallback-function-pointer">DsVeosCoSim_LogCallback Function Pointer</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>This function has no return values.</p>
<h3 id="dsveoscosimsetnextsimulationtime-function">DsVeosCoSim_SetNextSimulationTime Function</h3>
<h4 id="description">Description</h4>
<p>Sets the next simulation time for the given client handle.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_SetNextSimulationTime</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle, 
    DsVeosCoSim_SimulationTime simulationTime
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
<tr>
<td>simulationTime</td>
<td>The next simulation time. Refer to <a href="#dsveoscosim_simulationtime-type">DsVeosCoSim_SimulationTime Type</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h3 id="dsveoscosimsimulationcallback-function-pointer">DsVeosCoSim_SimulationCallback Function Pointer</h3>
<h4 id="description">Description</h4>
<p>A generic simulation callback function pointer.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-title">void</span> <span class="hljs-params">(*DsVeosCoSim_SimulationCallback)</span><span class="hljs-params">(
    DsVeosCoSim_SimulationTime simulationTime, 
    <span class="hljs-keyword">void</span>* userData
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>simulationTime</td>
<td>The current simulation time. Refer to <a href="#dsveoscosim_simulationtime-type">DsVeosCoSim_SimulationTime Type</a>.</td>
</tr>
<tr>
<td>userData</td>
<td>The user data passed to the co-simulation function via the <a href="#dsveoscosim_setcallbacks-function">DsVeosCoSim_SetCallbacks Function</a>. Can be NULL.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>This function has no return values.</p>
<h3 id="dsveoscosimsimulationterminatedcallback-function-pointer">DsVeosCoSim_SimulationTerminatedCallback Function Pointer</h3>
<h4 id="description">Description</h4>
<p>Called when a simulation is terminated.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-title">void</span> <span class="hljs-params">(*DsVeosCoSim_SimulationTerminatedCallback)</span><span class="hljs-params">(
    DsVeosCoSim_SimulationTime simulationTime,
    DsVeosCoSim_TerminateReason reason,
    <span class="hljs-keyword">void</span>* userData
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>simulationTime</td>
<td>The current simulation time. Refer to <a href="#dsveoscosim_simulationtime-type">DsVeosCoSim_SimulationTime Type</a>.</td>
</tr>
<tr>
<td>reason</td>
<td>The reason for the termination. Refer to <a href="#dsveoscosim_terminatereason-enumeration">DsVeosCoSim_TerminateReason Enumeration</a>.</td>
</tr>
<tr>
<td>userData</td>
<td>The user data passed to the co-simulation function via the <a href="#dsveoscosim_setcallbacks-function">DsVeosCoSim_SetCallbacks Function</a>. Can be NULL.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>This function has no return values.</p>
<h3 id="dsveoscosimstartpollingbasedcosimulation-function">DsVeosCoSim_StartPollingBasedCoSimulation Function</h3>
<h4 id="description">Description</h4>
<p>Starts a co-simulation in non-blocking mode.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_StartPollingBasedCoSimulation</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle,
    DsVeosCoSim_Callbacks callbacks
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
<tr>
<td>callbacks</td>
<td>The callbacks to be set. Refer to <a href="#dsveoscosim_callbacks-structure">DsVeosCoSim_Callbacks Structure</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h3 id="dsveoscosimtransmitcanmessage-function">DsVeosCoSim_TransmitCanMessage Function</h3>
<h4 id="description">Description</h4>
<p>Transmits a CAN message to the VEOS CoSim server.</p>
<p>The <code>DsVeosCoSim_TransmitCanMessage</code> function can be called in any callback handler. The timestamp property of transmission bus messages will be ignored.</p>
<p><strong>Note:</strong>
Currently, the DsVeosCoSim client cannot buffer more than 512 bus messages for each bus controller. If the buffer is full, the <code>DsVeosCoSim_TransmitCanMessage</code>
function returns <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result_Full</a>.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_TransmitCanMessage</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle,
    <span class="hljs-keyword">const</span> DsVeosCoSim_CanMessage* message
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
<tr>
<td>message</td>
<td>A pointer to a CAN message to be transmitted. Refer to <a href="#dsveoscosim_canmessage-structure">DsVeosCoSim_CanMessage Structure</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h3 id="dsveoscosimtransmitethmessage-function">DsVeosCoSim_TransmitEthMessage Function</h3>
<h4 id="description">Description</h4>
<p>Transmits an Ethernet message to the VEOS CoSim server.</p>
<p>The <code>DsVeosCoSim_TransmitEthMessage</code> function can be called in any callback handler. The timestamp property of transmission messages will be ignored.</p>
<p><strong>Note:</strong>
Currently, the DsVeosCoSim client cannot buffer more than 512 bus messages for each bus controller. If the buffer is full, the <code>DsVeosCoSim_TransmitEthMessage</code>
function returns <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result_Full</a>.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_TransmitEthMessage</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle,
    <span class="hljs-keyword">const</span> DsVeosCoSim_EthMessage* message
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
<tr>
<td>message</td>
<td>A pointer to an Ethernet message to be transmitted. Refer to <a href="#dsveoscosim_ethmessage-structure">DsVeosCoSim_EthMessage Structure</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h3 id="dsveoscosimtransmitlinmessage-function">DsVeosCoSim_TransmitLinMessage Function</h3>
<h4 id="description">Description</h4>
<p>Transmits a LIN message to the VEOS CoSim server.</p>
<p>The <code>DsVeosCoSim_TransmitLinMessage</code> function can be called in any callback handler. The timestamp property of transmitted bus messages will be ignored.</p>
<p><strong>Note:</strong>
Currently, the VEOS CoSim client cannot buffer more than 512 bus messages for each bus controller. If the buffer is full, the <code>DsVeosCoSim_TransmitLinMessage</code>
function returns <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result_Full</a>.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_TransmitLinMessage</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle,
    <span class="hljs-keyword">const</span> DsVeosCoSim_LinMessage* message
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
<tr>
<td>message</td>
<td>A pointer to the LIN message to be transmitted. Refer to <a href="#dsveoscosim_linmessage-structure">DsVeosCoSim_LinMessage Structure</a>.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h3 id="dsveoscosimwriteoutgoingsignal-function">DsVeosCoSim_WriteOutgoingSignal Function</h3>
<h4 id="description">Description</h4>
<p>Writes a value to an outgoing signal of the VEOS CoSim server identified by the given handle.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-function">DSVEOSCOSIM_DECL DsVeosCoSim_Result <span class="hljs-title">DsVeosCoSim_WriteOutgoingSignal</span><span class="hljs-params">(
    DsVeosCoSim_Handle handle,
    DsVeosCoSim_IoSignalId outgoingSignalId,
    <span class="hljs-keyword">uint32_t</span> length,
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* value
)</span></span>;
</div></code></pre>
<h4 id="parameters">Parameters</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>handle</td>
<td>The handle of the VEOS CoSim client. Refer to <a href="#dsveoscosim_handle-type">DsVeosCoSim_Handle Type</a>.</td>
</tr>
<tr>
<td>outgoingSignalId</td>
<td>The ID of the outgoing signal. Refer to <a href="#dsveoscosim_iosignalid-type">DsVeosCoSim_IoSignalId Type</a>.</td>
</tr>
<tr>
<td>length</td>
<td>The length of the value to write.</td>
</tr>
<tr>
<td>value</td>
<td>The value to write.</td>
</tr>
</tbody>
</table>
<h4 id="return-values">Return values</h4>
<p>Refer to <a href="#dsveoscosim_result-enumeration">DsVeosCoSim_Result Enumeration</a>.</p>
<h2 id="structures">Structures</h2>
<h3 id="dsveoscosimcallbacks-structure">DsVeosCoSim_Callbacks Structure</h3>
<h4 id="description">Description</h4>
<p>Contains the callbacks that can be called during the co-simulation.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">DsVeosCoSim_Callbacks</span> {</span>
    DsVeosCoSim_SimulationCallback simulationStartedCallback;
    DsVeosCoSim_SimulationCallback simulationStoppedCallback;
    DsVeosCoSim_SimulationTerminatedCallback simulationTerminatedCallback;
    DsVeosCoSim_SimulationCallback simulationPausedCallback;
    DsVeosCoSim_SimulationCallback simulationContinuedCallback;
    DsVeosCoSim_SimulationCallback simulationBeginStepCallback;
    DsVeosCoSim_SimulationCallback simulationEndStepCallback;
    DsVeosCoSim_IncomingSignalChangedCallback incomingSignalChangedCallback;
    DsVeosCoSim_CanMessageReceivedCallback canMessageReceivedCallback;
    DsVeosCoSim_EthMessageReceivedCallback ethMessageReceivedCallback;
    DsVeosCoSim_LinMessageReceivedCallback linMessageReceivedCallback;
    <span class="hljs-keyword">void</span>* userData;
} DsVeosCoSim_Callbacks;
</div></code></pre>
<h4 id="members">Members</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>simulationStartedCallback</td>
<td>Called when the simulation is started in VEOS. Refer to <a href="#dsveoscosim_simulationcallback-function-pointer">DsVeosCoSim_SimulationCallback Function Pointer</a>.</td>
</tr>
<tr>
<td>simulationStoppedCallback</td>
<td>Called when the simulation is stopped in VEOS. Refer to <a href="#dsveoscosim_simulationcallback-function-pointer">DsVeosCoSim_SimulationCallback Function Pointer</a>.</td>
</tr>
<tr>
<td>simulationTerminatedCallback</td>
<td>Called when the simulation is terminated in VEOS. Refer to <a href="#dsveoscosim_simulationterminatedcallback-function-pointer">DsVeosCoSim_SimulationTerminatedCallback Function Pointer</a>.</td>
</tr>
<tr>
<td>simulationPausedCallback</td>
<td>Called when the simulation is paused in VEOS. Refer to <a href="#dsveoscosim_simulationcallback-function-pointer">DsVeosCoSim_SimulationCallback Function Pointer</a>.</td>
</tr>
<tr>
<td>simulationContinuedCallback</td>
<td>Called when the simulation is continued in VEOS. Refer to <a href="#dsveoscosim_simulationcallback-function-pointer">DsVeosCoSim_SimulationCallback Function Pointer</a>.</td>
</tr>
<tr>
<td>simulationBeginStepCallback</td>
<td>Called at the beginning of a simulation step. Refer to <a href="#dsveoscosim_simulationcallback-function-pointer">DsVeosCoSim_SimulationCallback Function Pointer</a>.</td>
</tr>
<tr>
<td>simulationEndStepCallback</td>
<td>Called at the end of a simulation step. Refer to <a href="#dsveoscosim_simulationcallback-function-pointer">DsVeosCoSim_SimulationCallback Function Pointer</a>.</td>
</tr>
<tr>
<td>incomingSignalChangedCallback</td>
<td>Called when an incoming signal value has changed. Refer to <a href="#dsveoscosim_incomingsignalchangedcallback-function-pointer">DsVeosCoSim_IncomingSignalChangedCallback Function Pointer</a>.</td>
</tr>
<tr>
<td>canMessageReceivedCallback</td>
<td>Called when a CAN message is received from the VEOS CoSim server. Refer to <a href="#dsveoscosim_canmessagereceivedcallback-function-pointer">DsVeosCoSim_CanMessageReceivedCallback Function Pointer</a>.</td>
</tr>
<tr>
<td>ethMessageReceivedCallback</td>
<td>Called when an Ethernet message is received from the VEOS CoSim server. Refer to <a href="#dsveoscosim_ethmessagereceivedcallback-function-pointer">DsVeosCoSim_EthMessageReceivedCallback Function Pointer</a>.</td>
</tr>
<tr>
<td>linMessageReceivedCallback</td>
<td>Called when a LIN message is received from the VEOS CoSim server. Refer to <a href="#dsveoscosim_linmessagereceivedcallback-function-pointer">DsVeosCoSim_LinMessageReceivedCallback Function Pointer</a>.</td>
</tr>
<tr>
<td>userData</td>
<td>Arbitrary user data to be passed to the VEOS CoSim server.</td>
</tr>
</tbody>
</table>
<h3 id="dsveoscosimcancontroller-structure">DsVeosCoSim_CanController Structure</h3>
<h4 id="description">Description</h4>
<p>Represents a CAN controller.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">DsVeosCoSim_CanController</span> {</span>
    DsVeosCoSim_BusControllerId id;
    <span class="hljs-keyword">uint32_t</span> queueSize;
    <span class="hljs-keyword">uint64_t</span> bitsPerSecond;
    <span class="hljs-keyword">uint64_t</span> flexibleDataRateBitsPerSecond;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* name;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* channelName;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* clusterName;
} DsVeosCoSim_CanController;
</div></code></pre>
<h4 id="members">Members</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>The unique identifier of the CAN controller. Refer to <a href="#dsveoscosim_buscontrollerid-type">DsVeosCoSim_BusControllerId Type</a>.</td>
</tr>
<tr>
<td>queueSize</td>
<td>The maximum queue size of the CAN controller.</td>
</tr>
<tr>
<td>bitsPerSecond</td>
<td>The baud rate of the CAN controller.</td>
</tr>
<tr>
<td>flexibleDataRateBitsPerSecond</td>
<td>The baud rate for CAN FD.</td>
</tr>
<tr>
<td>name</td>
<td>The name of the CAN controller.</td>
</tr>
<tr>
<td>channelName</td>
<td>The name of the CAN channel to use.</td>
</tr>
<tr>
<td>clusterName</td>
<td>The name of the CAN cluster to which the CAN controller is connected.</td>
</tr>
</tbody>
</table>
<h3 id="dsveoscosimcanmessage-structure">DsVeosCoSim_CanMessage Structure</h3>
<h4 id="description">Description</h4>
<p>Contains information on a CAN message.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">DsVeosCoSim_CanMessage</span> {</span>
    DsVeosCoSim_SimulationTime timestamp;
    DsVeosCoSim_BusControllerId controllerId;
    <span class="hljs-keyword">uint32_t</span> id;
    DsVeosCoSim_CanMessageFlags flags;
    <span class="hljs-keyword">uint32_t</span> length;
    <span class="hljs-keyword">uint8_t</span>* data;
} DsVeosCoSim_CanMessage;
</div></code></pre>
<h4 id="members">Members</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>timestamp</td>
<td>Contains the virtual simulation time at which the CAN message was received. Only for received messages. Refer to <a href="#dsveoscosim_simulationtime-type">DsVeosCoSim_SimulationTime Type</a>.</td>
</tr>
<tr>
<td>controllerId</td>
<td>The ID of the CAN controller over which the CAN message was sent. Refer to <a href="#dsveoscosim_buscontrollerid-type">DsVeosCoSim_BusControllerId Type</a>.</td>
</tr>
<tr>
<td>id</td>
<td>The CAN message ID.</td>
</tr>
<tr>
<td>flags</td>
<td>The flags of the CAN message. Refer to <a href="#dsveoscosim_canmessageflags-enumeration">DsVeosCoSim_CanMessageFlags Enumeration</a>.</td>
</tr>
<tr>
<td>length</td>
<td>The length of the CAN message payload in bytes.</td>
</tr>
<tr>
<td>data</td>
<td>The CAN message payload.</td>
</tr>
</tbody>
</table>
<h3 id="dsveoscosimconnectconfig-structure">DsVeosCoSim_ConnectConfig Structure</h3>
<h4 id="description">Description</h4>
<p>Contains the data that is required for establishing a connection to the VEOS CoSim server.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">DsVeosCoSim_ConnectConfig</span> {</span>
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* remoteIpAddress;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* serverName;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* clientName;
    <span class="hljs-keyword">uint16_t</span> <span class="hljs-built_in">remotePort</span>;
    <span class="hljs-keyword">uint16_t</span> localPort;
} DsVeosCoSim_ConnectConfig;
</div></code></pre>
<h4 id="members">Members</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>remoteIpAddress</td>
<td>The IP address of the VEOS CoSim server. If not specified, this is set to 127.0.0.1.</td>
</tr>
<tr>
<td>serverName</td>
<td>The name of the VEOS CoSim server. If this is not specified, the remotePort is required to establish the connection.</td>
</tr>
<tr>
<td>clientName</td>
<td>The name of the VEOS CoSim Client.</td>
</tr>
<tr>
<td>remotePort</td>
<td>The TCP port of the VEOS CoSim server. If this is not specified, the serverName must be given.</td>
</tr>
<tr>
<td>localPort</td>
<td>The port of the VEOS CoSim client. Only change this value if tunneled communication is required.</td>
</tr>
</tbody>
</table>
<h3 id="dsveoscosimethcontroller-structure">DsVeosCoSim_EthController Structure</h3>
<h4 id="description">Description</h4>
<p>Represents an Ethernet controller.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">DsVeosCoSim_EthController</span> {</span>
    DsVeosCoSim_BusControllerId id;
    <span class="hljs-keyword">uint32_t</span> queueSize;
    <span class="hljs-keyword">uint64_t</span> bitsPerSecond;
    <span class="hljs-keyword">uint8_t</span> <span class="hljs-built_in">macAddress</span>[DSVEOSCOSIM_ETH_ADDRESS_LENGTH];
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* name;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* channelName;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* clusterName;
} DsVeosCoSim_EthController;
</div></code></pre>
<h4 id="members">Members</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>The unique identifier of the Ethernet controller. Refer to <a href="#dsveoscosim_buscontrollerid-type">DsVeosCoSim_BusControllerId Type</a>.</td>
</tr>
<tr>
<td>queueSize</td>
<td>The maximum queue size of the Ethernet controller.</td>
</tr>
<tr>
<td>bitsPerSecond</td>
<td>The baud rate of the Ethernet controller.</td>
</tr>
<tr>
<td>macAddress</td>
<td>The MAC address of the Ethernet controller.</td>
</tr>
<tr>
<td>name</td>
<td>The name of the Ethernet controller.</td>
</tr>
<tr>
<td>channelName</td>
<td>The name of the Ethernet channel to use.</td>
</tr>
<tr>
<td>clusterName</td>
<td>The name of the Ethernet cluster to which the Ethernet controller is connected.</td>
</tr>
</tbody>
</table>
<h3 id="dsveoscosimethmessage-structure">DsVeosCoSim_EthMessage Structure</h3>
<h4 id="description">Description</h4>
<p>Contains information on an Ethernet message.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">DsVeosCoSim_EthMessage</span> {</span>
    DsVeosCoSim_SimulationTime timestamp;
    DsVeosCoSim_BusControllerId controllerId;
    <span class="hljs-keyword">uint32_t</span> reserved;
    DsVeosCoSim_EthMessageFlags flags;
    <span class="hljs-keyword">uint32_t</span> length;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span>* data;
} DsVeosCoSim_EthMessage;
</div></code></pre>
<h4 id="members">Members</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>timestamp</td>
<td>Contains the virtual simulation time at which the Ethernet message was received. Refer to <a href="#dsveoscosim_simulationtime-type">DsVeosCoSim_SimulationTime Type</a>.</td>
</tr>
<tr>
<td>controllerId</td>
<td>The ID of the Ethernet controller over which the Ethernet message was sent. Refer to <a href="#dsveoscosim_buscontrollerid-type">DsVeosCoSim_BusControllerId Type</a>.</td>
</tr>
<tr>
<td>reserved</td>
<td>Reserved for future use.</td>
</tr>
<tr>
<td>flags</td>
<td>The flags of the Ethernet message. Refer to <a href="#dsveoscosim_ethmessageflags-enumeration">DsVeosCoSim_EthMessageFlags Enumeration</a>.</td>
</tr>
<tr>
<td>length</td>
<td>The length of the Ethernet message payload in bytes.</td>
</tr>
<tr>
<td>data</td>
<td>The Ethernet message payload.</td>
</tr>
</tbody>
</table>
<h3 id="dsveoscosimiosignal-structure">DsVeosCoSim_IoSignal Structure</h3>
<h4 id="description">Description</h4>
<p>Contains information on an I/O signal.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">DsVeosCoSim_IoSignal</span> {</span>
    DsVeosCoSim_IoSignalId id;
    <span class="hljs-keyword">uint32_t</span> length;
    DsVeosCoSim_DataType dataType;
    DsVeosCoSim_SizeKind sizeKind;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* name;
} DsVeosCoSim_IoSignal;
</div></code></pre>
<h4 id="members">Members</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>The unique identifier of the I/O signal. Refer to <a href="#dsveoscosim_iosignalid-type">DsVeosCoSim_IoSignalId Type</a>.</td>
</tr>
<tr>
<td>length</td>
<td>The exact length of the I/O signal if it is of fixed length or the maximum length if it is of variable size.</td>
</tr>
<tr>
<td>dataType</td>
<td>The data type of the I/O signal. Refer to <a href="#dsveoscosim_datatype-enumeration">DsVeosCoSim_DataType Enumeration</a>.</td>
</tr>
<tr>
<td>sizeKind</td>
<td>The size kind of the the I/O signal, i.e., variable or fixed length. Refer to <a href="#dsveoscosim_sizekind-enumeration">DsVeosCoSim_SizeKind Enumeration</a>.</td>
</tr>
<tr>
<td>name</td>
<td>The name of the I/O signal.</td>
</tr>
</tbody>
</table>
<h3 id="dsveoscosimlincontroller-structure">DsVeosCoSim_LinController Structure</h3>
<h4 id="description">Description</h4>
<p>Represents a LIN controller.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">DsVeosCoSim_LinController</span> {</span>
    DsVeosCoSim_BusControllerId id;
    <span class="hljs-keyword">uint32_t</span> queueSize;
    <span class="hljs-keyword">uint64_t</span> bitsPerSecond;
    DsVeosCoSim_LinControllerType type;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* name;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* channelName;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* clusterName;
} DsVeosCoSim_LinController;
</div></code></pre>
<h4 id="members">Members</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>The unique identifier of the LIN controller. Refer to <a href="#dsveoscosim_buscontrollerid-type">DsVeosCoSim_BusControllerId Type</a>.</td>
</tr>
<tr>
<td>queueSize</td>
<td>The maximum queue size of the LIN controller.</td>
</tr>
<tr>
<td>bitsPerSecond</td>
<td>The baud rate of the LIN controller.</td>
</tr>
<tr>
<td>type</td>
<td>The LIN controller type. Refer to <a href="#dsveoscosim_lincontrollertype-enumeration">DsVeosCoSim_LinControllerType Enumeration</a>.</td>
</tr>
<tr>
<td>name</td>
<td>The name of the LIN controller.</td>
</tr>
<tr>
<td>channelName</td>
<td>The name of the LIN channel to use.</td>
</tr>
<tr>
<td>clusterName</td>
<td>The name of the LIN cluster to which the LIN controller is connected.</td>
</tr>
</tbody>
</table>
<h3 id="dsveoscosimlinmessage-structure">DsVeosCoSim_LinMessage Structure</h3>
<h4 id="description">Description</h4>
<p>Contains information on a LIN message.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">DsVeosCoSim_LinMessage</span> {</span>
    DsVeosCoSim_SimulationTime timestamp;
    DsVeosCoSim_BusControllerId controllerId;
    <span class="hljs-keyword">uint32_t</span> id;
    DsVeosCoSim_LinMessageFlags flags;
    <span class="hljs-keyword">uint32_t</span> length;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span>* data;
} DsVeosCoSim_LinMessage;
</div></code></pre>
<h4 id="members">Members</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>timestamp</td>
<td>Contains the virtual simulation time at which the LIN message was received. Only for received messages. Refer to <a href="#dsveoscosim_simulationtime-type">DsVeosCoSim_SimulationTime Type</a>.</td>
</tr>
<tr>
<td>controllerId</td>
<td>The ID of the LIN controller over which the LIN message was sent. Refer to <a href="#dsveoscosim_buscontrollerid-type">DsVeosCoSim_BusControllerId Type</a>.</td>
</tr>
<tr>
<td>id</td>
<td>The LIN message ID.</td>
</tr>
<tr>
<td>flags</td>
<td>The flags of the LIN message. Refer to <a href="#dsveoscosim_linmessageflags-enumeration">DsVeosCoSim_LinMessageFlags Enumeration</a>.</td>
</tr>
<tr>
<td>length</td>
<td>The length of the LIN message payload in bytes.</td>
</tr>
<tr>
<td>data</td>
<td>The LIN message payload.</td>
</tr>
</tbody>
</table>
<h2 id="simple-types">Simple Types</h2>
<h3 id="dsveoscosimbuscontrollerid-type">DsVeosCoSim_BusControllerId Type</h3>
<h4 id="description">Description</h4>
<p>Represents a bus controller ID.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">uint32_t</span> DsVeosCoSim_BusControllerId;
</div></code></pre>
<h3 id="dsveoscosimhandle-type">DsVeosCoSim_Handle Type</h3>
<h4 id="description">Description</h4>
<p>A handle to represent the VEOS CoSim client.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">void</span>* DsVeosCoSim_Handle;
</div></code></pre>
<h3 id="dsveoscosimiosignalid-type">DsVeosCoSim_IoSignalId Type</h3>
<h4 id="description">Description</h4>
<p>Represents an I/O signal ID.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">uint32_t</span> DsVeosCoSim_IoSignalId;
</div></code></pre>
<h3 id="dsveoscosimsimulationtime-type">DsVeosCoSim_SimulationTime Type</h3>
<h4 id="description">Description</h4>
<p>Represents the simulation time in nanoseconds.</p>
<p>Divide by <a href="#macros">DSVEOSCOSIM_SIMULATION_TIME_RESOLUTION_PER_SECOND</a> to get the simulation time in seconds.</p>
<h4 id="syntax">Syntax</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">int64_t</span> DsVeosCoSim_SimulationTime;
</div></code></pre>
<h2 id="macros">Macros</h2>
<h3 id="description">Description</h3>
<p>The <code>DsVeosCoSim.h</code> file contains a number of macro definitions which are listed in the table below.</p>
<h3 id="table-of-macros">Table of macros</h3>
<table>
<thead>
<tr>
<th>Macro</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>DSVEOSCOSIM_SIMULATION_TIME_RESOLUTION_PER_SECOND 1e9</td>
<td>Defines the conversion factor between DsVeosCoSim_SimulationTime and seconds. The data type is double.</td>
</tr>
<tr>
<td>DSVEOSCOSIM_SIMULATION_TIME_TO_SECONDS(simulationTime) ((double) (simulationTime) / DSVEOSCOSIM_SIMULATION_TIME_RESOLUTION_PER_SECOND)</td>
<td>Converts the given simulation time to seconds. The resulting data type is double.</td>
</tr>
<tr>
<td>DSVEOSCOSIM_CAN_MESSAGE_MAX_LENGTH 64</td>
<td>Defines the maximum length of a CAN message payload.</td>
</tr>
<tr>
<td>DSVEOSCOSIM_ETH_MESSAGE_MAX_LENGTH 9018</td>
<td>Defines the maximum length of an Ethernet message payload.</td>
</tr>
<tr>
<td>DSVEOSCOSIM_LIN_MESSAGE_MAX_LENGTH 8</td>
<td>Defines the maximum length of a LIN message payload.</td>
</tr>
<tr>
<td>DSVEOSCOSIM_ETH_ADDRESS_LENGTH 6</td>
<td>Defines the MAC address length of an Ethernet controller.</td>
</tr>
</tbody>
</table>

</body>
</html>
